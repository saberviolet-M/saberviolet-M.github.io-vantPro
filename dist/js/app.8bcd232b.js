(function(e) { function n(n) { for (var r, a, o = n[0], i = n[1], s = n[2], f = 0, l = []; f < o.length; f++)a = o[f], Object.prototype.hasOwnProperty.call(u, a) && u[a] && l.push(u[a][0]), u[a] = 0; for (r in i)Object.prototype.hasOwnProperty.call(i, r) && (e[r] = i[r]); d && d(n); while (l.length)l.shift()(); return c.push.apply(c, s || []), t() } function t() { for (var e, n = 0; n < c.length; n++) { for (var t = c[n], r = !0, a = 1; a < t.length; a++) { var o = t[a]; u[o] !== 0 && (r = !1) }r && (c.splice(n--, 1), e = i(i.s = t[0])) } return e } var r = {}; var a = { app: 0 }; var u = { app: 0 }; var c = []; function o(e) { return i.p + 'js/' + ({}[e] || e) + '.' + { 'chunk-163d8568': '5a131c71', 'chunk-3c1593e4': 'e70ef6ac', 'chunk-47f321e0': 'fbc51c52', 'chunk-4fd034ba': '66c92e51', 'chunk-669142fa': 'eb66ce3e', 'chunk-1fbe24a6': 'dfd5ed3f', 'chunk-4de68267': '5617c894', 'chunk-71c84ede': '50579314', 'chunk-793033ad': 'd92a0acc', 'chunk-c4c0ee90': '60cdbf1c', 'chunk-c55985f8': 'f74283b6', 'chunk-cc0bd6e6': '964f63f1' }[e] + '.js' } function i(n) { if (r[n]) return r[n].exports; var t = r[n] = { i: n, l: !1, exports: {} }; return e[n].call(t.exports, t, t.exports, i), t.l = !0, t.exports }i.e = function(e) { var n = []; var t = { 'chunk-163d8568': 1, 'chunk-3c1593e4': 1, 'chunk-47f321e0': 1, 'chunk-4fd034ba': 1, 'chunk-1fbe24a6': 1, 'chunk-4de68267': 1, 'chunk-71c84ede': 1, 'chunk-c4c0ee90': 1, 'chunk-c55985f8': 1, 'chunk-cc0bd6e6': 1 }; a[e] ? n.push(a[e]) : a[e] !== 0 && t[e] && n.push(a[e] = new Promise(function(n, t) { for (var r = 'css/' + ({}[e] || e) + '.' + { 'chunk-163d8568': '802f7537', 'chunk-3c1593e4': 'ead5f0af', 'chunk-47f321e0': '77df59a9', 'chunk-4fd034ba': '23d155bb', 'chunk-669142fa': '31d6cfe0', 'chunk-1fbe24a6': '9ac9820e', 'chunk-4de68267': '541c31a7', 'chunk-71c84ede': '8570636c', 'chunk-793033ad': '31d6cfe0', 'chunk-c4c0ee90': '8d5bbaf9', 'chunk-c55985f8': 'a236c500', 'chunk-cc0bd6e6': 'f816f126' }[e] + '.css', u = i.p + r, c = document.getElementsByTagName('link'), o = 0; o < c.length; o++) { var s = c[o]; var f = s.getAttribute('data-href') || s.getAttribute('href'); if (s.rel === 'stylesheet' && (f === r || f === u)) return n() } var l = document.getElementsByTagName('style'); for (o = 0; o < l.length; o++) { s = l[o], f = s.getAttribute('data-href'); if (f === r || f === u) return n() } var d = document.createElement('link'); d.rel = 'stylesheet', d.type = 'text/css', d.onload = n, d.onerror = function(n) { var r = n && n.target && n.target.src || u; var c = new Error('Loading CSS chunk ' + e + ' failed.\n(' + r + ')'); c.code = 'CSS_CHUNK_LOAD_FAILED', c.request = r, delete a[e], d.parentNode.removeChild(d), t(c) }, d.href = u; var h = document.getElementsByTagName('head')[0]; h.appendChild(d) }).then(function() { a[e] = 0 })); var r = u[e]; if (r !== 0) if (r)n.push(r[2]); else { var c = new Promise(function(n, t) { r = u[e] = [n, t] }); n.push(r[2] = c); var s; var f = document.createElement('script'); f.charset = 'utf-8', f.timeout = 120, i.nc && f.setAttribute('nonce', i.nc), f.src = o(e); var l = new Error(); s = function(n) { f.onerror = f.onload = null, clearTimeout(d); var t = u[e]; if (t !== 0) { if (t) { var r = n && (n.type === 'load' ? 'missing' : n.type); var a = n && n.target && n.target.src; l.message = 'Loading chunk ' + e + ' failed.\n(' + r + ': ' + a + ')', l.name = 'ChunkLoadError', l.type = r, l.request = a, t[1](l) }u[e] = void 0 } }; var d = setTimeout(function() { s({ type: 'timeout', target: f }) }, 12e4); f.onerror = f.onload = s, document.head.appendChild(f) } return Promise.all(n) }, i.m = e, i.c = r, i.d = function(e, n, t) { i.o(e, n) || Object.defineProperty(e, n, { enumerable: !0, get: t }) }, i.r = function(e) { typeof Symbol !== 'undefined' && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }), Object.defineProperty(e, '__esModule', { value: !0 }) }, i.t = function(e, n) { if (1 & n && (e = i(e)), 8 & n) return e; if (4 & n && typeof e === 'object' && e && e.__esModule) return e; var t = Object.create(null); if (i.r(t), Object.defineProperty(t, 'default', { enumerable: !0, value: e }), 2 & n && typeof e !== 'string') for (var r in e)i.d(t, r, function(n) { return e[n] }.bind(null, r)); return t }, i.n = function(e) { var n = e && e.__esModule ? function() { return e.default } : function() { return e }; return i.d(n, 'a', n), n }, i.o = function(e, n) { return Object.prototype.hasOwnProperty.call(e, n) }, i.p = '', i.oe = function(e) { throw e }; var s = window.webpackJsonp = window.webpackJsonp || []; var f = s.push.bind(s); s.push = n, s = s.slice(); for (var l = 0; l < s.length; l++)n(s[l]); var d = f; c.push([0, 'chunk-vendors']), t() })({ 0: function(e, n, t) { e.exports = t('56d7') }, 4360: function(e, n, t) { 'use strict'; var r = t('2b0e'); var a = t('2f62'); var u = t('5d2d'); var c = { tokenInfo: Object(u.c)() }; var o = { setTokenInfo: function(e, n) { e.tokenInfo = n, Object(u.e)(n) }, removeTokenInfo: function() { c.tokenInfo = {}, Object(u.a)() } }; var i = {}; var s = {}; var f = { namespaced: !0, state: c, mutations: o, actions: i, getters: s }; var l = t('1da1'); var d = (t('96cf'), t('4de4'), t('c740'), t('5986')); var h = { channels: [], allChannels: [] }; var p = { setChannels: function(e, n) { e.channels = n }, setAllChannels: function(e, n) { e.allChannels = n }, addChannel: function(e, n) { e.channels.push(n) }, delChannel: function(e, n) { e.channels = e.channels.filter(function(e) { return e.id !== n.id }) } }; var b = { getChannelsAsync: function(e) { return Object(l.a)(regeneratorRuntime.mark(function n() { var t, r; return regeneratorRuntime.wrap(function(n) { while (1) switch (n.prev = n.next) { case 0:return n.next = 2, Object(d.b)(); case 2:t = n.sent, r = t.data.data.channels, e.commit('setChannels', r); case 5:case 'end':return n.stop() } }, n) }))() }, getAllChannelsAsync: function(e) { return Object(l.a)(regeneratorRuntime.mark(function n() { var t, r; return regeneratorRuntime.wrap(function(n) { while (1) switch (n.prev = n.next) { case 0:return n.next = 2, Object(d.a)(); case 2:t = n.sent, r = t.data.data.channels, e.commit('setAllChannels', r); case 5:case 'end':return n.stop() } }, n) }))() } }; var m = { optionalChannels: function(e) { return e.allChannels.filter(function(n) { var t = e.channels.findIndex(function(e) { return e.id === n.id }); return t === -1 }) } }; var k = { namespaced: !0, state: h, mutations: p, actions: b, getters: m }; r.a.use(a.a); n.a = new a.a.Store({ state: {}, mutations: {}, actions: {}, modules: { user: f, channels: k } }) }, '56d7': function(e, n, t) { 'use strict'; t.r(n); t('e260'), t('e6cf'), t('cca6'), t('a79d'), t('4de4'); var r = t('2b0e'); var a = function() { var e = this; var n = e.$createElement; var t = e._self._c || n; return t('div', { attrs: { id: 'app' } }, [t('keep-alive', [e.$route.meta.isKeepAlive ? t('router-view') : e._e()], 1), e.$route.meta.isKeepAlive ? e._e() : t('router-view')], 1) }; var u = []; var c = {}; var o = c; var i = t('2877'); var s = Object(i.a)(o, a, u, !1, null, null, null); var f = s.exports; var l = t('a18c'); var d = t('4360'); var h = t('751a'); var p = (t('5cfb'), t('e930'), t('8f80')); var b = (t('d1cf'), t('ee83')); var m = (t('e17f'), t('2241')); var k = (t('81e6'), t('9ffb')); var v = (t('4d48'), t('d1e1')); var g = (t('5f1a'), t('a3e2')); var y = (t('ac1e'), t('543e')); var O = (t('2b28'), t('9ed2')); var j = (t('5852'), t('d961')); var w = (t('2cbd'), t('ab2c')); var _ = (t('c3a6'), t('ad06')); var C = (t('8a58'), t('e41f')); var x = (t('0ec5'), t('21ab')); var S = (t('3df5'), t('2830')); var A = (t('66cf'), t('343b')); var I = (t('4056'), t('44bf')); var P = (t('c194'), t('7744')); var T = (t('ab71'), t('58e6')); var E = (t('2994'), t('2bdd')); var N = (t('bda7'), t('5e46')); var R = (t('da3c'), t('0b33')); var q = (t('a52c'), t('2ed4')); var z = (t('537a'), t('ac28')); var B = (t('e7e5'), t('d399')); var J = (t('38d5'), t('772a')); var L = (t('0653'), t('34e9')); var $ = (t('66b9'), t('b650')); var K = (t('5246'), t('6b41')); var M = (t('be7f'), t('565f')); r.a.use(M.a), r.a.use(K.a), r.a.use($.a), r.a.use(L.a), r.a.use(J.a), r.a.use(B.a), r.a.use(z.a), r.a.use(q.a), r.a.use(R.a), r.a.use(N.a), r.a.use(E.a), r.a.use(T.a), r.a.use(P.a), r.a.use(I.a), r.a.use(A.a), r.a.use(S.a), r.a.use(x.a), r.a.use(C.a), r.a.use(_.a), r.a.use(w.a), r.a.use(j.a), r.a.use(O.a), r.a.use(y.a), r.a.use(g.a), r.a.use(v.a), r.a.use(k.a), r.a.use(m.a), r.a.use(b.a), r.a.use(p.a); t('b20f'); var D = t('5a0c'); var U = t.n(D); var F = t('4208'); var H = t.n(F); t('a471'); U.a.extend(H.a), U.a.locale('zh-cn'); var G = function(e) { return U()(e).fromNow() }; r.a.filter('relative', G); var Q = new r.a(); r.a.prototype.$bus = Q, r.a.prototype.$http = h.a, r.a.config.productionTip = !1, new r.a({ router: l.a, store: d.a, render: function(e) { return e(f) } }).$mount('#app') }, 5986: function(e, n, t) { 'use strict'; t.d(n, 'b', function() { return a }), t.d(n, 'a', function() { return u }), t.d(n, 'c', function() { return c }); var r = t('751a'); var a = function() { return Object(r.a)({ method: 'get', url: '/v1_0/user/channels' }) }; var u = function() { return Object(r.a)({ method: 'get', url: '/v1_0/channels' }) }; var c = function(e) { return Object(r.a)({ method: 'put', url: '/v1_0/user/channels', data: { channels: e } }) } }, '5d2d': function(e, n, t) { 'use strict'; t.d(n, 'e', function() { return a }), t.d(n, 'c', function() { return u }), t.d(n, 'a', function() { return c }), t.d(n, 'd', function() { return i }), t.d(n, 'b', function() { return s }); var r = 'mobile-token'; var a = function(e) { localStorage.setItem(r, JSON.stringify(e)) }; var u = function() { return JSON.parse(localStorage.getItem(r)) || {} }; var c = function() { localStorage.removeItem(r) }; var o = 'history'; var i = function(e) { localStorage.setItem(o, JSON.stringify(e)) }; var s = function() { return JSON.parse(localStorage.getItem(o)) || [] } }, '751a': function(e, n, t) { 'use strict'; var r = t('1da1'); var a = (t('96cf'), t('d3b7'), t('bc3a')); var u = t.n(a); var c = t('4360'); var o = t('d604'); var i = t.n(o); var s = t('a18c'); var f = t('c24f'); var l = u.a.create({ baseURL: 'http://toutiao-app.itheima.net', transformResponse: [function(e) { try { return i.a.parse(e) } catch (n) { return e } }] }); l.interceptors.request.use(function(e) { var n = c.a.state.user.tokenInfo.token; return n && !e.headers.Authorization && (e.headers.Authorization = 'Bearer '.concat(n)), e }, function(e) { return Promise.reject(e) }), l.interceptors.response.use(function(e) { return e }, (function() { var e = Object(r.a)(regeneratorRuntime.mark(function e(n) { var t, r, a, u; return regeneratorRuntime.wrap(function(e) { while (1) switch (e.prev = e.next) { case 0:if (n.response.status !== 401) { e.next = 22; break } if (t = c.a.state.user.tokenInfo.refresh_token, !t) { e.next = 20; break } return e.prev = 3, e.next = 6, Object(f.e)(t); case 6:return r = e.sent, a = r.data.data.token, u = a, c.a.commit('user/setTokenInfo', { token: u, refresh_token: t }), n.config.headers.Authorization = 'Bearer '.concat(u), e.abrupt('return', l(n.config)); case 14:e.prev = 14, e.t0 = e.catch(3), c.a.commit('user/removeTokenInfo'), s.a.push({ path: '/login', query: { backTo: s.a.currentRoute.fullPath } }); case 18:e.next = 22; break; case 20:c.a.commit('user/removeTokenInfo'), s.a.push({ path: '/login', query: { backTo: s.a.currentRoute.fullPath } }); case 22:return e.abrupt('return', Promise.reject(n)); case 23:case 'end':return e.stop() } }, e, null, [[3, 14]]) })); return function(n) { return e.apply(this, arguments) } }())), n.a = l }, a18c: function(e, n, t) { 'use strict'; t('d3b7'), t('3ca3'), t('ddb0'), t('caad'); var r = t('2b0e'); var a = t('8c4f'); var u = t('4360'); var c = function() { return t.e('chunk-47f321e0').then(t.bind(null, 'd9c9')) }; var o = function() { return t.e('chunk-3c1593e4').then(t.bind(null, 'e134')) }; var i = function() { return t.e('chunk-793033ad').then(t.bind(null, '79ce')) }; var s = function() { return Promise.all([t.e('chunk-669142fa'), t.e('chunk-4de68267')]).then(t.bind(null, '102e')) }; var f = function() { return t.e('chunk-71c84ede').then(t.bind(null, 'a126')) }; var l = function() { return t.e('chunk-c4c0ee90').then(t.bind(null, 'ee9a')) }; var d = function() { return t.e('chunk-4fd034ba').then(t.bind(null, 'ef42')) }; var h = function() { return t.e('chunk-163d8568').then(t.bind(null, 'a8db')) }; var p = function() { return Promise.all([t.e('chunk-669142fa'), t.e('chunk-1fbe24a6')]).then(t.bind(null, 'a706')) }; var b = function() { return t.e('chunk-c55985f8').then(t.bind(null, 'eb65')) }; var m = function() { return t.e('chunk-cc0bd6e6').then(t.bind(null, '6e82')) }; r.a.use(a.a); var k = [{ path: '/login', component: c }, { path: '/', component: o, children: [{ path: '/', component: s, meta: { isKeepAlive: !0 } }, { path: '/question', component: f }, { path: '/video', component: l }, { path: '/user', component: d }] }, { path: '/search', component: i }, { path: '/result', component: h }, { path: '/article/:id', component: p, props: !0 }, { path: '/userProfile', component: b }, { path: '/userChat', component: m }, { path: '/*', component: c }]; var v = new a.a({ routes: k }); var g = a.a.prototype.push; a.a.prototype.push = function(e) { return g.call(this, e).catch(function(e) { return e }) }; var y = ['/user']; v.beforeEach(function(e, n, t) { var r = u.a.state.user.tokenInfo.token; e.path === '/login' && r ? t('/') : y.includes(e.path) ? r ? t() : t({ path: '/login', query: { backTo: e.fullPath } }) : t() }), n.a = v }, b20f: function(e, n, t) {}, c24f: function(e, n, t) { 'use strict'; t.d(n, 'd', function() { return a }), t.d(n, 'b', function() { return u }), t.d(n, 'a', function() { return c }), t.d(n, 'f', function() { return o }), t.d(n, 'e', function() { return i }), t.d(n, 'c', function() { return s }), t.d(n, 'h', function() { return f }), t.d(n, 'g', function() { return l }); var r = t('751a'); var a = function(e, n) { return Object(r.a)({ method: 'post', url: '/v1_0/authorizations', data: { mobile: e, code: n } }) }; var u = function() { return Object(r.a)({ method: 'get', url: '/v1_0/user/profile' }) }; var c = function(e) { return Object(r.a)({ method: 'post', url: '/v1_0/user/followings', data: { target: e } }) }; var o = function(e) { return Object(r.a)({ method: 'delete', url: '/v1_0/user/followings/' + e }) }; var i = function(e) { return Object(r.a)({ method: 'put', url: '/v1_0/authorizations', headers: { Authorization: 'Bearer '.concat(e) } }) }; var s = function() { return Object(r.a)({ method: 'get', url: '/v1_0/user' }) }; var f = function(e) { return Object(r.a)({ method: 'patch', url: '/v1_0/user/profile', data: e }) }; var l = function(e) { return Object(r.a)({ method: 'patch', url: '/v1_0/user/photo', data: e }) } } })
// # sourceMappingURL=app.8bcd232b.js.map
