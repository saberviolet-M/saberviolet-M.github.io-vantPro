{"version":3,"sources":["webpack:///./src/views/Article/components/CommentReply.vue?addd","webpack:///./src/views/Article/index.vue?6dd9","webpack:///./src/views/Article/components/ArticleComment.vue?d538","webpack:///./src/views/Article/index.vue?bf42","webpack:///./src/views/Article/components/ArticleComment.vue?1bce","webpack:///./src/api/comment.js","webpack:///./src/views/Article/components/CommentReply.vue?c571","webpack:///src/views/Article/components/CommentReply.vue","webpack:///./src/views/Article/components/CommentReply.vue?5db2","webpack:///./src/views/Article/components/CommentReply.vue","webpack:///src/views/Article/components/ArticleComment.vue","webpack:///./src/views/Article/components/ArticleComment.vue?94d2","webpack:///./src/views/Article/components/ArticleComment.vue","webpack:///src/views/Article/index.vue","webpack:///./src/views/Article/index.vue?cc87","webpack:///./src/views/Article/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","back","_v","_s","article","title","aut_photo","aut_name","_f","pubdate","toggleFollow","is_followed","domProps","content","attitude","toggleLike","toggleDislike","id","staticRenderFns","finished","onLoad","model","value","callback","$$v","loading","expression","_l","item","index","key","staticStyle","slot","clickShowReply","is_liking","toggleCommentLike","trim","addComment","style","height","isShowReply","articleId","currentComment","_e","reqGetComments","offset","http","method","url","params","type","source","reqAddComment","data","target","reqAddCommentLike","commentId","reqDeleteCommentLike","reqGetCommentsReply","reqAddCommentReply","art_id","reply_count","$emit","addApply","name","props","Object","require","String","required","list","methods","component","components","created","loadArticle"],"mappings":"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","file":"js/chunk-1fbe24a6.dfd5ed3f.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentReply.vue?vue&type=style&index=0&id=64b8df25&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4247e20a&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleComment.vue?vue&type=style&index=0&id=490f4ba4&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-container\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"left-arrow\":\"\",\"title\":\"文章详情\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),(_vm.loading)?_c('van-loading',{staticClass:\"article-loading\"}):_c('div',{staticClass:\"detail\"},[_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.article.title))]),_c('div',{staticClass:\"author\"},[_c('van-image',{attrs:{\"src\":_vm.article.aut_photo,\"round\":\"\",\"width\":\"1rem\",\"height\":\"1rem\",\"fit\":\"fill\"}}),_c('div',{staticClass:\"text\"},[_c('p',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.article.aut_name))]),_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"relative\")(_vm.article.pubdate)))])]),_c('van-button',{attrs:{\"round\":\"\",\"size\":\"small\",\"type\":\"info\"},on:{\"click\":_vm.toggleFollow}},[_vm._v(\" \"+_vm._s(_vm.article.is_followed ? '取关' : '+ 关注')+\" \")])],1),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.article.content)}}),_c('van-divider',[_vm._v(\"END\")]),_c('div',{staticClass:\"zan\"},[_c('van-button',{attrs:{\"round\":\"\",\"size\":\"small\",\"hairline\":\"\",\"type\":\"primary\",\"plain\":\"\",\"icon\":_vm.article.attitude === 1 ? 'good-job' : 'good-job-o'},on:{\"click\":_vm.toggleLike}},[_vm._v(\" \"+_vm._s(_vm.article.attitude === 1 ? '取消点赞' : '点赞')+\" \")]),_vm._v(\" \"),_c('van-button',{attrs:{\"round\":\"\",\"size\":\"small\",\"hairline\":\"\",\"type\":\"danger\",\"plain\":\"\",\"icon\":\"delete\"},on:{\"click\":_vm.toggleDislike}},[_vm._v(\" \"+_vm._s(_vm.article.attitude === 0 ? '取消不喜欢' : '不喜欢')+\" \")])],1)],1),_c('article-comment',{attrs:{\"articleId\":_vm.id}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-comments\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('van-cell',{key:index},[_c('van-image',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"icon\",\"round\":\"\",\"width\":\"30\",\"height\":\"30\",\"src\":item.aut_photo},slot:\"icon\"}),_c('span',{staticStyle:{\"color\":\"#466b9d\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(item.aut_name))]),_c('div',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('p',{staticStyle:{\"color\":\"#363636\"}},[_vm._v(_vm._s(item.content))]),_c('p',[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(_vm._f(\"relative\")(item.pubdate)))]),_c('van-button',{attrs:{\"size\":\"mini\",\"type\":\"default\"},on:{\"click\":function($event){return _vm.clickShowReply(item)}}},[_vm._v(\" 回复 \")])],1)]),_c('van-icon',{attrs:{\"slot\":\"right-icon\",\"name\":item.is_liking ? 'like' : 'like-o'},on:{\"click\":function($event){return _vm.toggleCommentLike(item)}},slot:\"right-icon\"})],1)}),1),_c('van-cell-group',{staticClass:\"publish-wrap\"},[_c('van-field',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入评论内容\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"content\"}},[_c('van-button',{attrs:{\"slot\":\"button\",\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":_vm.addComment},slot:\"button\"},[_vm._v(\"发布 \")])],1),_c('van-popup',{style:({ height: '85%' }),attrs:{\"round\":\"\",\"position\":\"bottom\"},model:{value:(_vm.isShowReply),callback:function ($$v) {_vm.isShowReply=$$v},expression:\"isShowReply\"}},[(_vm.isShowReply)?_c('comment-reply',{attrs:{\"article-id\":_vm.articleId,\"currentComment\":_vm.currentComment},on:{\"close\":function($event){_vm.isShowReply = false}}}):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import http from '@/utils/http'\r\n\r\n/**\r\n * 获取文章的评论\r\n * @param {*} articleId 文章编号\r\n * @param {*} offset 获取评论数据的偏移量，值为评论id，表示从此id的数据向后取，不传表示从第一页开始读取数据\r\n */\r\nexport const reqGetComments = (articleId, offset) => {\r\n  return http({\r\n    method: 'get',\r\n    url: '/v1_0/comments',\r\n    params: {\r\n      type: 'a', // a表示对文章的评论 ,c表示对评论的回复\r\n      source: articleId,\r\n      offset\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 对文章进行评论\r\n * @param {*} articleId 文章编号\r\n * @param {*} content 评论内容\r\n */\r\nexport const reqAddComment = (articleId, content) => {\r\n  return http({\r\n    method: 'post',\r\n    url: '/v1_0/comments',\r\n    data: {\r\n      target: articleId,\r\n      content\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 对文章评论进行点赞\r\n * @param {*} commentId 评论id\r\n */\r\nexport const reqAddCommentLike = commentId => {\r\n  return http({\r\n    method: 'post',\r\n    url: '/v1_0/comment/likings',\r\n    data: {\r\n      target: commentId\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 取消文章评论的点赞\r\n * @param {*} commentId 评论id\r\n */\r\nexport const reqDeleteCommentLike = commentId => {\r\n  return http({\r\n    method: 'delete',\r\n    url: '/v1_0/comment/likings/' + commentId\r\n  })\r\n}\r\n\r\n/**\r\n * 获取文章评论回复\r\n * @param {*} commentId 回复的评论id\r\n * @param {*} offset 获取评论数据的偏移量，值为评论id，表示从此id的数据向后取，不传表示从第一页开始读取数据\r\n */\r\nexport const reqGetCommentsReply = (commentId, offset) => {\r\n  return http({\r\n    method: 'get',\r\n    url: '/v1_0/comments',\r\n    params: {\r\n      type: 'c', // a表示对文章的评论 ,c表示对评论的回复\r\n      source: commentId,\r\n      offset\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 添加文章评论回复\r\n * @param {*} commentId 评论id\r\n * @param {*} content 内容\r\n * @param {*} articleId 文章id\r\n */\r\nexport const reqAddCommentReply = (commentId, content, articleId) => {\r\n  return http({\r\n    method: 'post',\r\n    url: '/v1_0/comments',\r\n    data: {\r\n      target: commentId,\r\n      content,\r\n      art_id: articleId\r\n    }\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-comments\"},[_c('van-nav-bar',{attrs:{\"title\":_vm.currentComment.reply_count + '条回复'}},[_c('van-icon',{attrs:{\"slot\":\"left\",\"name\":\"cross\"},on:{\"click\":function($event){return _vm.$emit('close')}},slot:\"left\"})],1),_c('van-cell',{attrs:{\"title\":\"当前评论\"}},[_c('van-image',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"icon\",\"round\":\"\",\"width\":\"30\",\"height\":\"30\",\"src\":_vm.currentComment.aut_photo},slot:\"icon\"}),_c('span',{staticStyle:{\"color\":\"#466b9d\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.currentComment.aut_name))]),_c('div',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('p',{staticStyle:{\"color\":\"#363636\"}},[_vm._v(_vm._s(_vm.currentComment.content))]),_c('p',[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(_vm._f(\"relative\")(_vm.currentComment.pubdate)))]),_c('van-button',{attrs:{\"size\":\"mini\",\"type\":\"default\"}},[_vm._v(\"回复 \"+_vm._s(_vm.currentComment.reply_count))])],1)]),_c('van-icon',{attrs:{\"slot\":\"right-icon\"},slot:\"right-icon\"})],1),_c('van-divider',[_vm._v(\"全部回复\")]),_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('van-cell',{key:index},[_c('van-image',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"icon\",\"round\":\"\",\"width\":\"30\",\"height\":\"30\",\"src\":item.aut_photo},slot:\"icon\"}),_c('span',{staticStyle:{\"color\":\"#466b9d\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(item.aut_name))]),_c('div',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('p',{staticStyle:{\"color\":\"#363636\"}},[_vm._v(_vm._s(item.content))]),_c('p',[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_vm._v(_vm._s(_vm._f(\"relative\")(item.pubdate)))])])])],1)}),1),_c('van-cell-group',{staticClass:\"publish-wrap\"},[_c('van-field',{attrs:{\"clearable\":\"\",\"placeholder\":\"请输入回复内容\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"content\"}},[_c('van-button',{attrs:{\"slot\":\"button\",\"size\":\"mini\",\"type\":\"info\"},on:{\"click\":_vm.addApply},slot:\"button\"},[_vm._v(\"发布回复\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"article-comments\">\r\n    <!-- 导航栏 -->\r\n    <van-nav-bar :title=\"currentComment.reply_count + '条回复'\">\r\n      <van-icon @click=\"$emit('close')\" slot=\"left\" name=\"cross\" />\r\n    </van-nav-bar>\r\n    <!-- /导航栏 -->\r\n\r\n    <!-- 当前评论 -->\r\n    <van-cell title=\"当前评论\">\r\n      <van-image\r\n        slot=\"icon\"\r\n        round\r\n        width=\"30\"\r\n        height=\"30\"\r\n        style=\"margin-right: 10px;\"\r\n        :src=\"currentComment.aut_photo\"\r\n      />\r\n      <span style=\"color: #466b9d;\" slot=\"title\">{{\r\n        currentComment.aut_name\r\n      }}</span>\r\n      <div slot=\"label\">\r\n        <p style=\"color: #363636;\">{{ currentComment.content }}</p>\r\n        <p>\r\n          <span style=\"margin-right: 10px;\">{{\r\n            currentComment.pubdate | relative\r\n          }}</span>\r\n          <van-button size=\"mini\" type=\"default\"\r\n            >回复 {{ currentComment.reply_count }}</van-button\r\n          >\r\n        </p>\r\n      </div>\r\n      <van-icon slot=\"right-icon\" />\r\n    </van-cell>\r\n    <!-- /当前评论 -->\r\n    <van-divider>全部回复</van-divider>\r\n\r\n    <!-- 对当前评论 回复列表 -->\r\n    <van-list\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      @load=\"onLoad\"\r\n    >\r\n      <van-cell v-for=\"(item, index) in list\" :key=\"index\">\r\n        <van-image\r\n          slot=\"icon\"\r\n          round\r\n          width=\"30\"\r\n          height=\"30\"\r\n          style=\"margin-right: 10px;\"\r\n          :src=\"item.aut_photo\"\r\n        />\r\n        <span style=\"color: #466b9d;\" slot=\"title\">{{ item.aut_name }}</span>\r\n        <div slot=\"label\">\r\n          <p style=\"color: #363636;\">{{ item.content }}</p>\r\n          <p>\r\n            <span style=\"margin-right: 10px;\">{{\r\n              item.pubdate | relative\r\n            }}</span>\r\n          </p>\r\n        </div>\r\n      </van-cell>\r\n    </van-list>\r\n    <!-- 回复列表 -->\r\n\r\n    <!-- 发布回复 -->\r\n    <van-cell-group class=\"publish-wrap\">\r\n      <van-field clearable placeholder=\"请输入回复内容\" v-model.trim=\"content\">\r\n        <van-button slot=\"button\" size=\"mini\" type=\"info\" @click=\"addApply\"\r\n          >发布回复</van-button\r\n        >\r\n      </van-field>\r\n    </van-cell-group>\r\n    <!-- /发布回复 -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { reqGetCommentsReply, reqAddCommentReply } from '@/api/comment'\r\nexport default {\r\n  name: 'CommentReply',\r\n  props: {\r\n    currentComment: {\r\n      type: Object,\r\n      require: true\r\n    },\r\n    articleId: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      list: [], // 评论列表\r\n      loading: false, // 上拉加载更多的 loading\r\n      finished: false, // 是否加载结束\r\n      content: '' // 回复的内容\r\n    }\r\n  },\r\n  methods: {\r\n    async onLoad() {\r\n      try {\r\n        // 请求获取数据\r\n        const res = await reqGetCommentsReply(\r\n          this.currentComment.com_id.toString(),\r\n          this.offset\r\n        )\r\n        const arr = res.data.data.results\r\n        // 将数据追加到list前面\r\n        this.list = [...this.list, ...arr]\r\n        // 加载状态结束\r\n        this.loading = false\r\n        // 更新offset\r\n        this.offset = res.data.data.last_id\r\n        // 判断数据是否加载完成\r\n        if (arr.length === 0) {\r\n          this.finished = true\r\n        }\r\n      } catch (e) {\r\n        console.log(e)\r\n      }\r\n    },\r\n    async addApply() {\r\n      if (this.content === '') return\r\n      // 1 发送请求, 添加评论\r\n      const res = await reqAddCommentReply(\r\n        this.currentComment.com_id.toString(),\r\n        this.content,\r\n        this.articleId\r\n      )\r\n      // 2 更新视图, 添加评论成功, 最新的评论应该在最上面\r\n      this.list.unshift(res.data.data.new_obj)\r\n      // 3 回复的数量 +1\r\n      this.currentComment.reply_count++\r\n      // 4 清空评论区\r\n      this.content = ''\r\n      // 5. 给出操作提示\r\n      this.$toast.success('发布回复成功')\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n// 发表评论的区域是固定在下端的\r\n.publish-wrap {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n}\r\n// 给发表评论区空出地方\r\n.van-list {\r\n  margin-bottom: 45px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentReply.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentReply.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CommentReply.vue?vue&type=template&id=64b8df25&scoped=true&\"\nimport script from \"./CommentReply.vue?vue&type=script&lang=js&\"\nexport * from \"./CommentReply.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CommentReply.vue?vue&type=style&index=0&id=64b8df25&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"64b8df25\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"article-comments\">\r\n    <!-- 评论列表 -->\r\n    <van-list\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      @load=\"onLoad\"\r\n    >\r\n      <van-cell v-for=\"(item, index) in list\" :key=\"index\">\r\n        <van-image\r\n          slot=\"icon\"\r\n          round\r\n          width=\"30\"\r\n          height=\"30\"\r\n          style=\"margin-right: 10px;\"\r\n          :src=\"item.aut_photo\"\r\n        />\r\n        <span style=\"color: #466b9d;\" slot=\"title\">{{ item.aut_name }}</span>\r\n        <div slot=\"label\">\r\n          <p style=\"color: #363636;\">{{ item.content }}</p>\r\n          <p>\r\n            <span style=\"margin-right: 10px;\">{{\r\n              item.pubdate | relative\r\n            }}</span>\r\n            <van-button\r\n              @click=\"clickShowReply(item)\"\r\n              size=\"mini\"\r\n              type=\"default\"\r\n            >\r\n              回复\r\n            </van-button>\r\n          </p>\r\n        </div>\r\n        <van-icon\r\n          @click=\"toggleCommentLike(item)\"\r\n          slot=\"right-icon\"\r\n          :name=\"item.is_liking ? 'like' : 'like-o'\"\r\n        />\r\n      </van-cell>\r\n    </van-list>\r\n    <!-- 评论列表 -->\r\n\r\n    <!-- 发布评论 -->\r\n    <van-cell-group class=\"publish-wrap\">\r\n      <van-field clearable placeholder=\"请输入评论内容\" v-model.trim=\"content\">\r\n        <van-button slot=\"button\" size=\"mini\" type=\"info\" @click=\"addComment\"\r\n          >发布\r\n        </van-button>\r\n      </van-field>\r\n      <!-- 回复组件 -->\r\n      <van-popup\r\n        v-model=\"isShowReply\"\r\n        round\r\n        position=\"bottom\"\r\n        :style=\"{ height: '85%' }\"\r\n      >\r\n        <comment-reply\r\n          v-if=\"isShowReply\"\r\n          @close=\"isShowReply = false\"\r\n          :article-id=\"articleId\"\r\n          :currentComment=\"currentComment\"\r\n        ></comment-reply>\r\n      </van-popup>\r\n      <!-- /回复组件 -->\r\n    </van-cell-group>\r\n    <!-- /发布评论 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  reqAddComment,\r\n  reqGetComments,\r\n  reqAddCommentLike,\r\n  reqDeleteCommentLike\r\n} from '@/api/comment.js'\r\nimport CommentReply from './CommentReply'\r\nexport default {\r\n  name: 'ArticleComment',\r\n  components: { CommentReply },\r\n  props: {\r\n    articleId: {\r\n      type: String,\r\n      require: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      list: [], // 评论列表\r\n      loading: false, // 上拉加载更多的 loading\r\n      finished: false, // 是否加载结束\r\n      offset: null,\r\n      content: '',\r\n      isShowReply: false,\r\n      currentComment: {}\r\n    }\r\n  },\r\n  created() {\r\n    this.onLoad()\r\n  },\r\n  methods: {\r\n    async onLoad() {\r\n      // 获取评论数据\r\n      const res = await reqGetComments(this.articleId, this.offset)\r\n      const arr = res.data.data.results\r\n      // 将数据添加到list中\r\n      this.list = [...this.list, ...arr]\r\n      // 加载状态结束\r\n      this.loading = false\r\n      // 判断数据是否加载完成\r\n      if (arr.length === 0) {\r\n        this.finished = true\r\n      }\r\n      // 更新offset\r\n      this.offset = res.data.data.last_id\r\n    },\r\n    // 切换评论的点赞状态\r\n    async toggleCommentLike(comment) {\r\n      try {\r\n        const commentId = comment.com_id.toString()\r\n        if (comment.is_liking) {\r\n          // 点赞状态, 点击按钮时, 应该要取消点赞\r\n          await reqDeleteCommentLike(commentId)\r\n          this.$toast.success('取消喜欢成功')\r\n        } else {\r\n          // 非点赞状态, 点击按钮时, 应该要点赞\r\n          await reqAddCommentLike(commentId)\r\n          this.$toast.success('喜欢成功')\r\n        }\r\n        // 数据回显\r\n        comment.is_liking = !comment.is_liking\r\n      } catch (e) {\r\n        console.log(e)\r\n        this.$toast.fail('操作失败')\r\n      }\r\n    },\r\n    async addComment() {\r\n      try {\r\n        if (this.content === '') return\r\n        const {\r\n          data: {\r\n            data: { new_obj: comment }\r\n          }\r\n        } = await reqAddComment(this.articleId, this.content)\r\n        this.list.unshift(comment)\r\n      } catch (error) {\r\n        this.$toast.fail('该文章已关闭评论')\r\n      }\r\n      this.content = ''\r\n    },\r\n    clickShowReply(currentComment) {\r\n      this.isShowReply = true\r\n      this.currentComment = currentComment\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n// 发表评论的区域是固定在下端的\r\n.publish-wrap {\r\n  position: fixed;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n}\r\n// 给发表评论区空出地方\r\n.van-list {\r\n  margin-bottom: 45px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleComment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ArticleComment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleComment.vue?vue&type=template&id=490f4ba4&scoped=true&\"\nimport script from \"./ArticleComment.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleComment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArticleComment.vue?vue&type=style&index=0&id=490f4ba4&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"490f4ba4\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"article-container\">\r\n    <!-- 导航栏 -->\r\n    <van-nav-bar\r\n      fixed\r\n      left-arrow\r\n      @click-left=\"$router.back()\"\r\n      title=\"文章详情\"\r\n    ></van-nav-bar>\r\n    <!-- /导航栏 -->\r\n\r\n    <!-- 加载中 loading -->\r\n    <van-loading v-if=\"loading\" class=\"article-loading\" />\r\n    <!-- /加载中 loading -->\r\n\r\n    <!-- 文章详情 -->\r\n    <div class=\"detail\" v-else>\r\n      <h3 class=\"title\">{{ article.title }}</h3>\r\n      <div class=\"author\">\r\n        <van-image\r\n          :src=\"article.aut_photo\"\r\n          round\r\n          width=\"1rem\"\r\n          height=\"1rem\"\r\n          fit=\"fill\"\r\n        />\r\n\r\n        <div class=\"text\">\r\n          <p class=\"name\">{{ article.aut_name }}</p>\r\n          <p class=\"time\">{{ article.pubdate | relative }}</p>\r\n        </div>\r\n        <van-button round size=\"small\" type=\"info\" @click=\"toggleFollow\">\r\n          {{ article.is_followed ? '取关' : '+ 关注' }}\r\n        </van-button>\r\n      </div>\r\n      <div class=\"content\" v-html=\"article.content\"></div>\r\n      <van-divider>END</van-divider>\r\n      <div class=\"zan\">\r\n        <van-button\r\n          round\r\n          size=\"small\"\r\n          @click=\"toggleLike\"\r\n          hairline\r\n          type=\"primary\"\r\n          plain\r\n          :icon=\"article.attitude === 1 ? 'good-job' : 'good-job-o'\"\r\n        >\r\n          {{ article.attitude === 1 ? '取消点赞' : '点赞' }}\r\n        </van-button>\r\n        &nbsp;&nbsp;&nbsp;&nbsp;\r\n        <van-button\r\n          @click=\"toggleDislike\"\r\n          round\r\n          size=\"small\"\r\n          hairline\r\n          type=\"danger\"\r\n          plain\r\n          icon=\"delete\"\r\n        >\r\n          {{ article.attitude === 0 ? '取消不喜欢' : '不喜欢' }}\r\n        </van-button>\r\n      </div>\r\n    </div>\r\n    <!-- /文章详情 -->\r\n\r\n    <!-- 文章评论 -->\r\n    <article-comment :articleId=\"id\"></article-comment>\r\n    <!-- /文章评论 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// push时传对象, params (写name传递) 就通过 this.$route.params获取\r\n// push时传对象, query  (写path)     就通过 this.$route.query 获取\r\n// 动态路由传参  /article/:id        this.$route.params 获取\r\nimport {\r\n  reqGetArticleDetail,\r\n  reqDeleteLike,\r\n  reqAddLike,\r\n  reqDeleteDisLike,\r\n  reqAddDisLike\r\n} from '@/api/article.js'\r\nimport { reqFollowUser, reqUnFollowUser } from '@/api/user'\r\nimport ArticleComment from './components/ArticleComment.vue'\r\nexport default {\r\n  components: { ArticleComment },\r\n  name: 'ArticleIndex',\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      require: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true, // 控制加载中的 loading 状态\r\n      article: {}\r\n    }\r\n  },\r\n  created() {\r\n    console.log('this.id', this.id)\r\n    this.loadArticle()\r\n  },\r\n  methods: {\r\n    async loadArticle() {\r\n      const {\r\n        data: { data }\r\n      } = await reqGetArticleDetail(this.id)\r\n      // 保存文章详情\r\n      this.article = data\r\n      // 取消加载状态\r\n      this.loading = false\r\n    },\r\n    async toggleFollow() {\r\n      try {\r\n        // 根据当前的 is_followed 状态, 决定发送什么请求\r\n        if (this.article.is_followed) {\r\n          // 当前为 true, 点击按钮, 要取消\r\n          await reqUnFollowUser(this.article.aut_id)\r\n        } else {\r\n          // 当前为 false, 点击按钮, 要关注\r\n          await reqFollowUser(this.article.aut_id)\r\n        }\r\n        // 成功后更新视图, 直接更新状态即可\r\n        this.article.is_followed = !this.article.is_followed\r\n        this.$toast.success('操作成功')\r\n      } catch (e) {\r\n        this.$toast.success('操作失败')\r\n      }\r\n    },\r\n    async toggleLike() {\r\n      // 根据attitude来决定调用哪个方法\r\n      if (this.article.attitude === 1) {\r\n        // 点击时, 要取消点赞\r\n        await reqDeleteLike(this.article.art_id.toString())\r\n        this.article.attitude = -1\r\n      } else {\r\n        // 点击时, 要进行点赞请求\r\n        await reqAddLike(this.article.art_id.toString())\r\n        this.article.attitude = 1\r\n      }\r\n      this.$toast.success('操作成功')\r\n    },\r\n    async toggleDislike() {\r\n      // 根据attitude来决定调用哪个方法, 如果是0, 说明是不喜欢, 点击就要取消不喜欢\r\n      if (this.article.attitude === 0) {\r\n        await reqDeleteDisLike(this.article.art_id.toString())\r\n        this.article.attitude = -1\r\n      } else {\r\n        await reqAddDisLike(this.article.art_id.toString())\r\n        this.article.attitude = 0\r\n      }\r\n      this.$toast.success('操作成功')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.article-container {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  overflow-y: scroll;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.article-loading {\r\n  padding-top: 100px;\r\n  text-align: center;\r\n}\r\n.error {\r\n  padding-top: 100px;\r\n  text-align: center;\r\n}\r\n.detail {\r\n  padding: 50px 10px;\r\n  .title {\r\n    font-size: 16px;\r\n  }\r\n  .zan {\r\n    text-align: center;\r\n  }\r\n  .author {\r\n    padding: 10px 0;\r\n    display: flex;\r\n    .text {\r\n      flex: 1;\r\n      padding-left: 10px;\r\n      line-height: 1.3;\r\n      .name {\r\n        font-size: 14px;\r\n        margin: 0;\r\n      }\r\n      .time {\r\n        margin: 0;\r\n        font-size: 12px;\r\n        color: #999;\r\n      }\r\n    }\r\n  }\r\n  .content {\r\n    font-size: 14px;\r\n    overflow: hidden;\r\n    white-space: pre-wrap;\r\n    word-break: break-all;\r\n    ::v-deep img {\r\n      max-width: 100%;\r\n      background: #f9f9f9;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4247e20a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4247e20a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4247e20a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}