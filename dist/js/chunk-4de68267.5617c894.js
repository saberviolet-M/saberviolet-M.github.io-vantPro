(window.webpackJsonp = window.webpackJsonp || []).push([['chunk-4de68267'], { '102e': function(e, t, n) { 'use strict'; n.r(t); var r = function() { var e = this; var t = e.$createElement; var n = e._self._c || t; return n('div', { staticClass: 'home-container' }, [n('van-tabs', { model: { value: e.active, callback: function(t) { e.active = t }, expression: 'active' } }, e._l(e.channels, function(t) { return n('van-tab', { key: t.id, attrs: { title: t.name } }, [n('article-list', { attrs: { channel: t }, on: { closePopUp: function(t) { e.showMore = !1 }, 'show-more': e.handleShowMore } })], 1) }), 1), n('van-popup', { style: { width: '80%' }, model: { value: e.showMore, callback: function(t) { e.showMore = t }, expression: 'showMore' } }, [n('more-action', { ref: 'more' })], 1), n('div', { staticClass: 'bar-btn', on: { click: e.showChannelEditSheet } }, [n('van-icon', { attrs: { name: 'wap-nav' } })], 1), n('van-action-sheet', { attrs: { title: '频道管理' }, model: { value: e.showChannelEdit, callback: function(t) { e.showChannelEdit = t }, expression: 'showChannelEdit' } }, [n('channel-edit', { ref: 'edit', attrs: { active: e.active }, on: { 'update-active': e.updateActive, 'update-curchannel': e.updateCurChannel } })], 1)], 1) }; var a = []; var i = n('5530'); var c = (n('c740'), function() { var e = this; var t = e.$createElement; var n = e._self._c || t; return n('div', { ref: 'refScroll', staticClass: 'articleList', on: { scroll: e.scroll } }, [n('van-pull-refresh', { on: { refresh: e.onRefresh }, model: { value: e.refreshing, callback: function(t) { e.refreshing = t }, expression: 'refreshing' } }, [n('van-list', { attrs: { finished: e.finished, 'finished-text': '==私は底线もある==' }, on: { load: e.onLoad }, model: { value: e.loading, callback: function(t) { e.loading = t }, expression: 'loading' } }, e._l(e.list, function(t) { return n('van-cell', { key: t.art_id.toString(), attrs: { title: t.title }, on: { click: function(n) { e.$router.push('/article/' + t.art_id.toString()) } }, scopedSlots: e._u([{ key: 'label', fn: function() { return [n('van-grid', { attrs: { 'column-num': t.cover.images.length } }, e._l(t.cover.images, function(e, t) { return n('van-grid-item', { key: t }, [n('van-image', { attrs: { 'lazy-load': '', src: e } })], 1) }), 1), n('div', { staticClass: 'meta' }, [n('span', [e._v(e._s(t.aut_name))]), n('span', [e._v(e._s(t.comm_count) + '评论')]), n('span', [e._v(e._s(e._f('relative')(t.pubdate)))]), e.tokenInfo.token ? n('span', { staticClass: 'close', on: { click: function(n) { n.stopPropagation(), e.close(t.art_id.toString(), e.channel.id) } } }, [n('van-icon', { attrs: { name: 'cross' } })], 1) : e._e()])] }, proxy: !0 }], null, !0) }) }), 1)], 1)], 1) }); var o = []; var s = n('2909'); var l = n('1da1'); var u = (n('96cf'), n('99af'), n('4de4'), n('d3b7'), n('25f0'), n('2423')); var f = n('2f62'); var d = { name: 'ArticleList', props: { channel: { type: Object, required: !0 } }, data: function() { return { list: [], loading: !1, finished: !1, refreshing: !1, timestamp: null, ArticleId: null, channelId: null, scrollTop: 0 } }, computed: Object(i.a)({}, Object(f.e)('user', ['tokenInfo'])), methods: { onLoad: function() { var e = this; return Object(l.a)(regeneratorRuntime.mark(function t() { var n, r; return regeneratorRuntime.wrap(function(t) { while (1) switch (t.prev = t.next) { case 0:return e.timestamp || (e.timestamp = +new Date()), t.next = 4, Object(u.g)(e.channel.id, e.timestamp); case 4:n = t.sent, r = n.data.data, e.timestamp = r.pre_timestamp, e.list = [].concat(Object(s.a)(e.list), Object(s.a)(r.results)), e.loading = !1, r.results === 0 && (e.finished = !0); case 10:case 'end':return t.stop() } }, t) }))() }, onRefresh: function() { var e = this; return Object(l.a)(regeneratorRuntime.mark(function t() { var n, r; return regeneratorRuntime.wrap(function(t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 3, Object(u.g)(e.channel.id, Date.now()); case 3:n = t.sent, r = n.data.data, e.timestamp = r.pre_timestamp, e.list = r.results, e.$toast.success('刷新成功'), e.refreshing = !1; case 9:case 'end':return t.stop() } }, t) }))() }, close: function(e, t) { this.$emit('show-more', t), this.ArticleId = e, this.channelId = t }, scroll: function(e) { this.scrollTop = e.target.scrollTop } }, created: function() { var e = this; this.$bus.$on('delDisLike', Object(l.a)(regeneratorRuntime.mark(function t() { return regeneratorRuntime.wrap(function(t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, Object(u.e)(e.ArticleId); case 2:e.list = e.list.filter(function(t) { return t.art_id.toString() !== e.ArticleId }), e.$emit('closePopUp'); case 4:case 'end':return t.stop() } }, t) }))), this.$bus.$on('report', (function() { var t = Object(l.a)(regeneratorRuntime.mark(function t(n) { return regeneratorRuntime.wrap(function(t) { while (1) switch (t.prev = t.next) { case 0:if (e.channelId !== window.home.channelId) { t.next = 6; break } return t.next = 3, Object(u.h)(e.ArticleId, n); case 3:e.$toast.success('等待处理,感谢反馈'), e.list = e.list.filter(function(t) { return t.art_id.toString() !== e.ArticleId }), e.$emit('closePopUp'); case 6:case 'end':return t.stop() } }, t) })); return function(e) { return t.apply(this, arguments) } }())) }, activated: function() { this.$refs.refScroll.scrollTop = this.scrollTop } }; var h = d; var p = (n('b97e'), n('2877')); var v = Object(p.a)(h, c, o, !1, null, '6ce6bb33', null); var b = v.exports; var m = function() { var e = this; var t = e.$createElement; var n = e._self._c || t; return n('div', { staticClass: 'more-action' }, [e.isReport ? n('van-cell-group', [n('van-cell', { attrs: { icon: 'arrow-left' }, on: { click: function(t) { e.isReport = !1 } } }, [e._v('返回')]), e._l(e.reportList, function(t) { return n('van-cell', { key: t.value, on: { click: function(n) { return e.report(t.value) } } }, [e._v(' ' + e._s(t.label) + ' ')]) })], 2) : n('van-cell-group', [n('van-cell', { on: { click: e.disLike } }, [e._v('不感兴趣')]), n('van-cell', { attrs: { 'is-link': '' }, on: { click: function(t) { e.isReport = !0 } } }, [e._v('反馈垃圾内容')]), n('van-cell', [e._v('拉黑作者')])], 1)], 1) }; var g = []; var w = [{ value: 0, label: '其它问题' }, { value: 1, label: '标题夸张' }, { value: 2, label: '低俗色情' }, { value: 3, label: '错别字多' }, { value: 4, label: '旧闻重复' }, { value: 6, label: '内容不实' }, { value: 8, label: '侵权' }, { value: 5, label: '广告软文' }, { value: 7, label: '涉嫌违法犯罪' }]; var O = w; var _ = { name: 'MoreAction', data: function() { return { isReport: !1, reportList: O } }, methods: { disLike: function() { this.$bus.$emit('delDisLike') }, report: function(e) { this.$bus.$emit('report', e) } } }; var k = _; var j = (n('d2fc'), Object(p.a)(k, m, g, !1, null, '47a54a3a', null)); var C = j.exports; var y = function() { var e = this; var t = e.$createElement; var n = e._self._c || t; return n('div', { staticClass: 'channel-edit' }, [n('div', { staticClass: 'channel' }, [n('van-cell', { attrs: { title: '我的频道', border: !1 } }, [n('van-button', { attrs: { plain: '', size: 'mini', type: 'danger' }, on: { click: function(t) { e.editing = !e.editing } } }, [e._v(' ' + e._s(e.editing ? '取消' : '编辑') + ' ')])], 1), n('van-grid', e._l(e.channels, function(t, r) { return n('van-grid-item', { key: t.id, class: { current: r === e.active }, on: { click: function(n) { return e.clickMychannel(t) } } }, [n('span', [e._v(e._s(t.name))]), n('van-icon', { directives: [{ name: 'show', rawName: 'v-show', value: e.editing && r !== 0, expression: 'editing && index !== 0' }], staticClass: 'btn', attrs: { name: 'cross' }, on: { click: function(n) { return n.stopPropagation(), e.clickDelChannel(t, r) } } })], 1) }), 1)], 1), n('div', { staticClass: 'channel' }, [n('van-cell', { attrs: { title: '可选频道', border: !1 } }), n('van-grid', e._l(e.optionalChannels, function(t) { return n('van-grid-item', { key: t.id, on: { click: function(n) { return e.clickAddChannel(t) } } }, [n('span', [e._v(e._s(t.name))])]) }), 1)], 1)]) }; var x = []; var A = (n('a9e3'), n('d81d'), n('5986')); var E = { name: 'ChannelEdit', props: { active: { type: Number, required: !1, default: 0 } }, data: function() { return { editing: !1 } }, methods: Object(i.a)(Object(i.a)(Object(i.a)({}, Object(f.b)('channels', ['getAllChannelsAsync'])), Object(f.d)('channels', ['addChannel', 'delChannel'])), {}, { clickMychannel: function(e) { this.$emit('update-curchannel', e) }, clickAddChannel: function(e) { this.addChannel(e), this.resetChannel() }, clickDelChannel: function(e, t) { t === this.active && this.$emit('update-active', 0), t < this.active && this.$emit('update-active', this.active - 1), this.delChannel(e), this.resetChannel() }, resetChannel: function() { var e = this; return Object(l.a)(regeneratorRuntime.mark(function t() { var n; return regeneratorRuntime.wrap(function(t) { while (1) switch (t.prev = t.next) { case 0:return n = e.channels.map(function(e, t) { return { id: e.id, seq: t } }), n.shift(), t.next = 4, Object(A.c)(n); case 4:case 'end':return t.stop() } }, t) }))() } }), computed: Object(i.a)(Object(i.a)({}, Object(f.e)('channels', ['channels'])), Object(f.c)('channels', ['optionalChannels'])), created: function() { this.getAllChannelsAsync() } }; var I = E; var $ = (n('505d'), Object(p.a)(I, y, x, !1, null, '5d7900cc', null)); var N = $.exports; var R = { name: 'HomeIndex', components: { ArticleList: b, MoreAction: C, ChannelEdit: N }, data: function() { return { active: 0, showMore: !1, channelId: null, showChannelEdit: !1 } }, computed: Object(i.a)({}, Object(f.e)('channels', ['channels'])), methods: Object(i.a)(Object(i.a)({}, Object(f.b)('channels', ['getChannelsAsync', 'getAllChannelsAsync'])), {}, { handleShowMore: function(e) { var t = this; this.channelId = e, this.showMore = !0, this.$nextTick(function() { t.$refs.more.isReport = !1 }) }, showChannelEditSheet: function() { this.$refs.edit && (this.$refs.edit.editing = !1), this.showChannelEdit = !0, this.getAllChannelsAsync() }, updateCurChannel: function(e) { this.showChannelEdit = !1; var t = this.channels.findIndex(function(t) { return t.id === e.id }); t !== -1 && (this.active = t) }, updateActive: function(e) { this.active = e } }), created: function() { this.getChannelsAsync(), window.home = this } }; var S = R; var P = (n('7523'), Object(p.a)(S, r, a, !1, null, 'a710ffc2', null)); t.default = P.exports }, '159b': function(e, t, n) { var r = n('da84'); var a = n('fdbc'); var i = n('17c2'); var c = n('9112'); for (var o in a) { var s = r[o]; var l = s && s.prototype; if (l && l.forEach !== i) try { c(l, 'forEach', i) } catch (u) { l.forEach = i } } }, '17c2': function(e, t, n) { 'use strict'; var r = n('b727').forEach; var a = n('a640'); var i = a('forEach'); e.exports = i ? [].forEach : function(e) { return r(this, e, arguments.length > 1 ? arguments[1] : void 0) } }, '34e3': function(e, t, n) {}, '505d': function(e, t, n) { 'use strict'; n('bc91') }, 5530: function(e, t, n) { 'use strict'; n.d(t, 'a', function() { return i }); n('b64b'), n('a4d3'), n('4de4'), n('e439'), n('159b'), n('dbb4'); var r = n('d23f'); function a(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter(function(t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), n.push.apply(n, r) } return n } function i(e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t] != null ? arguments[t] : {}; t % 2 ? a(Object(n), !0).forEach(function(t) { r(e, t, n[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : a(Object(n)).forEach(function(t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) }) } return e } }, 5899: function(e, t) { e.exports = '\t\n\v\f\r                　\u2028\u2029\ufeff' }, '58a8': function(e, t, n) { var r = n('1d80'); var a = n('5899'); var i = '[' + a + ']'; var c = RegExp('^' + i + i + '*'); var o = RegExp(i + i + '*$'); var s = function(e) { return function(t) { var n = String(r(t)); return 1 & e && (n = n.replace(c, '')), 2 & e && (n = n.replace(o, '')), n } }; e.exports = { start: s(1), end: s(2), trim: s(3) } }, 7156: function(e, t, n) { var r = n('861d'); var a = n('d2bb'); e.exports = function(e, t, n) { var i, c; return a && typeof (i = t.constructor) === 'function' && i !== n && r(c = i.prototype) && c !== n.prototype && a(e, c), e } }, 7523: function(e, t, n) { 'use strict'; n('dd43') }, a640: function(e, t, n) { 'use strict'; var r = n('d039'); e.exports = function(e, t) { var n = [][e]; return !!n && r(function() { n.call(null, t || function() { throw 1 }, 1) }) } }, a9e3: function(e, t, n) { 'use strict'; var r = n('83ab'); var a = n('da84'); var i = n('94ca'); var c = n('6eeb'); var o = n('5135'); var s = n('c6b6'); var l = n('7156'); var u = n('c04e'); var f = n('d039'); var d = n('7c73'); var h = n('241c').f; var p = n('06cf').f; var v = n('9bf2').f; var b = n('58a8').trim; var m = 'Number'; var g = a[m]; var w = g.prototype; var O = s(d(w)) == m; var _ = function(e) { var t; var n; var r; var a; var i; var c; var o; var s; var l = u(e, !1); if (typeof l === 'string' && l.length > 2) if (l = b(l), t = l.charCodeAt(0), t === 43 || t === 45) { if (n = l.charCodeAt(2), n === 88 || n === 120) return NaN } else if (t === 48) { switch (l.charCodeAt(1)) { case 66:case 98:r = 2, a = 49; break; case 79:case 111:r = 8, a = 55; break; default:return +l } for (i = l.slice(2), c = i.length, o = 0; o < c; o++) if (s = i.charCodeAt(o), s < 48 || s > a) return NaN; return parseInt(i, r) } return +l }; if (i(m, !g(' 0o1') || !g('0b1') || g('+0x1'))) { for (var k, j = function(e) { var t = arguments.length < 1 ? 0 : e; var n = this; return n instanceof j && (O ? f(function() { w.valueOf.call(n) }) : s(n) != m) ? l(new g(_(t)), n, j) : _(t) }, C = r ? h(g) : 'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range'.split(','), y = 0; C.length > y; y++)o(g, k = C[y]) && !o(j, k) && v(j, k, p(g, k)); j.prototype = w, w.constructor = j, c(a, m, j) } }, b64b: function(e, t, n) { var r = n('23e7'); var a = n('7b0b'); var i = n('df75'); var c = n('d039'); var o = c(function() { i(1) }); r({ target: 'Object', stat: !0, forced: o }, { keys: function(e) { return i(a(e)) } }) }, b97e: function(e, t, n) { 'use strict'; n('c6bb') }, bc91: function(e, t, n) {}, c6bb: function(e, t, n) {}, d23f: function(e, t) { function n(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e }e.exports = n, e.exports.default = e.exports, e.exports.__esModule = !0 }, d2fc: function(e, t, n) { 'use strict'; n('34e3') }, d81d: function(e, t, n) { 'use strict'; var r = n('23e7'); var a = n('b727').map; var i = n('1dde'); var c = i('map'); r({ target: 'Array', proto: !0, forced: !c }, { map: function(e) { return a(this, e, arguments.length > 1 ? arguments[1] : void 0) } }) }, dbb4: function(e, t, n) { var r = n('23e7'); var a = n('83ab'); var i = n('56ef'); var c = n('fc6a'); var o = n('06cf'); var s = n('8418'); r({ target: 'Object', stat: !0, sham: !a }, { getOwnPropertyDescriptors: function(e) { var t; var n; var r = c(e); var a = o.f; var l = i(r); var u = {}; var f = 0; while (l.length > f)n = a(r, t = l[f++]), void 0 !== n && s(u, t, n); return u } }) }, dd43: function(e, t, n) {}, e439: function(e, t, n) { var r = n('23e7'); var a = n('d039'); var i = n('fc6a'); var c = n('06cf').f; var o = n('83ab'); var s = a(function() { c(1) }); var l = !o || s; r({ target: 'Object', stat: !0, forced: l, sham: !o }, { getOwnPropertyDescriptor: function(e, t) { return c(i(e), t) } }) } }])
// # sourceMappingURL=chunk-4de68267.5617c894.js.map
