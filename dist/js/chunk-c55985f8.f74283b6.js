(window.webpackJsonp = window.webpackJsonp || []).push([['chunk-c55985f8'], { '3b28': function(e, t, n) {}, '788b': function(e, t, n) { 'use strict'; n('3b28') }, '7e79': function(e, t, n) { !(function(t, n) { e.exports = n() }(window, function() { return (function(e) { var t = {}; function n(r) { if (t[r]) return t[r].exports; var o = t[r] = { i: r, l: !1, exports: {} }; return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports } return n.m = e, n.c = t, n.d = function(e, t, r) { n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r }) }, n.r = function(e) { typeof Symbol !== 'undefined' && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }), Object.defineProperty(e, '__esModule', { value: !0 }) }, n.t = function(e, t) { if (1 & t && (e = n(e)), 8 & t) return e; if (4 & t && typeof e === 'object' && e && e.__esModule) return e; var r = Object.create(null); if (n.r(r), Object.defineProperty(r, 'default', { enumerable: !0, value: e }), 2 & t && typeof e !== 'string') for (var o in e)n.d(r, o, function(t) { return e[t] }.bind(null, o)); return r }, n.n = function(e) { var t = e && e.__esModule ? function() { return e.default } : function() { return e }; return n.d(t, 'a', t), t }, n.o = function(e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, n.p = '', n(n.s = 6) }([function(e, t, n) { var r = n(2); typeof r === 'string' && (r = [[e.i, r, '']]); var o = { hmr: !0, transform: void 0, insertInto: void 0 }; n(4)(r, o), r.locals && (e.exports = r.locals) }, function(e, t, n) { 'use strict'; var r = n(0); n.n(r).a }, function(e, t, n) { (e.exports = n(3)(!1)).push([e.i, '\n.vue-cropper[data-v-6dae58fd] {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  direction: ltr;\n  touch-action: none;\n  text-align: left;\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC");\n}\n.cropper-box[data-v-6dae58fd],\n.cropper-box-canvas[data-v-6dae58fd],\n.cropper-drag-box[data-v-6dae58fd],\n.cropper-crop-box[data-v-6dae58fd],\n.cropper-face[data-v-6dae58fd] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  user-select: none;\n}\n.cropper-box-canvas img[data-v-6dae58fd] {\n  position: relative;\n  text-align: left;\n  user-select: none;\n  transform: none;\n  max-width: none;\n  max-height: none;\n}\n.cropper-box[data-v-6dae58fd] {\n  overflow: hidden;\n}\n.cropper-move[data-v-6dae58fd] {\n  cursor: move;\n}\n.cropper-crop[data-v-6dae58fd] {\n  cursor: crosshair;\n}\n.cropper-modal[data-v-6dae58fd] {\n  background: rgba(0, 0, 0, 0.5);\n}\n.cropper-crop-box[data-v-6dae58fd] {\n  /*border: 2px solid #39f;*/\n}\n.cropper-view-box[data-v-6dae58fd] {\n  display: block;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  outline: 1px solid #39f;\n  outline-color: rgba(51, 153, 255, 0.75);\n  user-select: none;\n}\n.cropper-view-box img[data-v-6dae58fd] {\n  user-select: none;\n  text-align: left;\n  max-width: none;\n  max-height: none;\n}\n.cropper-face[data-v-6dae58fd] {\n  top: 0;\n  left: 0;\n  background-color: #fff;\n  opacity: 0.1;\n}\n.crop-info[data-v-6dae58fd] {\n  position: absolute;\n  left: 0px;\n  min-width: 65px;\n  text-align: center;\n  color: white;\n  line-height: 20px;\n  background-color: rgba(0, 0, 0, 0.8);\n  font-size: 12px;\n}\n.crop-line[data-v-6dae58fd] {\n  position: absolute;\n  display: block;\n  width: 100%;\n  height: 100%;\n  opacity: 0.1;\n}\n.line-w[data-v-6dae58fd] {\n  top: -3px;\n  left: 0;\n  height: 5px;\n  cursor: n-resize;\n}\n.line-a[data-v-6dae58fd] {\n  top: 0;\n  left: -3px;\n  width: 5px;\n  cursor: w-resize;\n}\n.line-s[data-v-6dae58fd] {\n  bottom: -3px;\n  left: 0;\n  height: 5px;\n  cursor: s-resize;\n}\n.line-d[data-v-6dae58fd] {\n  top: 0;\n  right: -3px;\n  width: 5px;\n  cursor: e-resize;\n}\n.crop-point[data-v-6dae58fd] {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  opacity: 0.75;\n  background-color: #39f;\n  border-radius: 100%;\n}\n.point1[data-v-6dae58fd] {\n  top: -4px;\n  left: -4px;\n  cursor: nw-resize;\n}\n.point2[data-v-6dae58fd] {\n  top: -5px;\n  left: 50%;\n  margin-left: -3px;\n  cursor: n-resize;\n}\n.point3[data-v-6dae58fd] {\n  top: -4px;\n  right: -4px;\n  cursor: ne-resize;\n}\n.point4[data-v-6dae58fd] {\n  top: 50%;\n  left: -4px;\n  margin-top: -3px;\n  cursor: w-resize;\n}\n.point5[data-v-6dae58fd] {\n  top: 50%;\n  right: -4px;\n  margin-top: -3px;\n  cursor: e-resize;\n}\n.point6[data-v-6dae58fd] {\n  bottom: -5px;\n  left: -4px;\n  cursor: sw-resize;\n}\n.point7[data-v-6dae58fd] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -3px;\n  cursor: s-resize;\n}\n.point8[data-v-6dae58fd] {\n  bottom: -5px;\n  right: -4px;\n  cursor: se-resize;\n}\n@media screen and (max-width: 500px) {\n.crop-point[data-v-6dae58fd] {\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    opacity: 0.45;\n    background-color: #39f;\n    border-radius: 100%;\n}\n.point1[data-v-6dae58fd] {\n    top: -10px;\n    left: -10px;\n}\n.point2[data-v-6dae58fd],\n  .point4[data-v-6dae58fd],\n  .point5[data-v-6dae58fd],\n  .point7[data-v-6dae58fd] {\n    display: none;\n}\n.point3[data-v-6dae58fd] {\n    top: -10px;\n    right: -10px;\n}\n.point4[data-v-6dae58fd] {\n    top: 0;\n    left: 0;\n}\n.point6[data-v-6dae58fd] {\n    bottom: -10px;\n    left: -10px;\n}\n.point8[data-v-6dae58fd] {\n    bottom: -10px;\n    right: -10px;\n}\n}\n', '']) }, function(e, t) { e.exports = function(e) { var t = []; return t.toString = function() { return this.map(function(t) { var n = (function(e, t) { var n = e[1] || ''; var r = e[3]; if (!r) return n; if (t && typeof btoa === 'function') { var o = (function(e) { return '/*# sourceMappingURL=data:application/json;charset=utf-8;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(e)))) + ' */' }(r)); var i = r.sources.map(function(e) { return '/*# sourceURL=' + r.sourceRoot + e + ' */' }); return [n].concat(i).concat([o]).join('\n') } return [n].join('\n') }(t, e)); return t[2] ? '@media ' + t[2] + '{' + n + '}' : n }).join('') }, t.i = function(e, n) { typeof e === 'string' && (e = [[null, e, '']]); for (var r = {}, o = 0; o < this.length; o++) { var i = this[o][0]; typeof i === 'number' && (r[i] = !0) } for (o = 0; o < e.length; o++) { var a = e[o]; typeof a[0] === 'number' && r[a[0]] || (n && !a[2] ? a[2] = n : n && (a[2] = '(' + a[2] + ') and (' + n + ')'), t.push(a)) } }, t } }, function(e, t, n) { var r = {}; var o = (function(e) { var t; return function() { return void 0 === t && (t = e.apply(this, arguments)), t } }(function() { return window && document && document.all && !window.atob })); var i = (function(e) { var t = {}; return function(e, n) { if (typeof e === 'function') return e(); if (void 0 === t[e]) { var r = (function(e, t) { return t ? t.querySelector(e) : document.querySelector(e) }.call(this, e, n)); if (window.HTMLIFrameElement && r instanceof window.HTMLIFrameElement) try { r = r.contentDocument.head } catch (e) { r = null }t[e] = r } return t[e] } }()); var a = null; var s = 0; var c = []; var h = n(5); function p(e, t) { for (var n = 0; n < e.length; n++) { var o = e[n]; var i = r[o.id]; if (i) { i.refs++; for (var a = 0; a < i.parts.length; a++)i.parts[a](o.parts[a]); for (;a < o.parts.length; a++)i.parts.push(v(o.parts[a], t)) } else { var s = []; for (a = 0; a < o.parts.length; a++)s.push(v(o.parts[a], t)); r[o.id] = { id: o.id, refs: 1, parts: s } } } } function u(e, t) { for (var n = [], r = {}, o = 0; o < e.length; o++) { var i = e[o]; var a = t.base ? i[0] + t.base : i[0]; var s = { css: i[1], media: i[2], sourceMap: i[3] }; r[a] ? r[a].parts.push(s) : n.push(r[a] = { id: a, parts: [s] }) } return n } function l(e, t) { var n = i(e.insertInto); if (!n) throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid."); var r = c[c.length - 1]; if (e.insertAt === 'top')r ? r.nextSibling ? n.insertBefore(t, r.nextSibling) : n.appendChild(t) : n.insertBefore(t, n.firstChild), c.push(t); else if (e.insertAt === 'bottom')n.appendChild(t); else { if (typeof e.insertAt !== 'object' || !e.insertAt.before) throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n"); var o = i(e.insertAt.before, n); n.insertBefore(t, o) } } function d(e) { if (e.parentNode === null) return !1; e.parentNode.removeChild(e); var t = c.indexOf(e); t >= 0 && c.splice(t, 1) } function f(e) { var t = document.createElement('style'); if (void 0 === e.attrs.type && (e.attrs.type = 'text/css'), void 0 === e.attrs.nonce) { var r = (function() { return n.nc }()); r && (e.attrs.nonce = r) } return g(t, e.attrs), l(e, t), t } function g(e, t) { Object.keys(t).forEach(function(n) { e.setAttribute(n, t[n]) }) } function v(e, t) { var n, r, o, i; if (t.transform && e.css) { if (!(i = typeof t.transform === 'function' ? t.transform(e.css) : t.transform.default(e.css))) return function() {}; e.css = i } if (t.singleton) { var c = s++; n = a || (a = f(t)), r = w.bind(null, n, c, !1), o = w.bind(null, n, c, !0) } else e.sourceMap && typeof URL === 'function' && typeof URL.createObjectURL === 'function' && typeof URL.revokeObjectURL === 'function' && typeof Blob === 'function' && typeof btoa === 'function' ? (n = (function(e) { var t = document.createElement('link'); return void 0 === e.attrs.type && (e.attrs.type = 'text/css'), e.attrs.rel = 'stylesheet', g(t, e.attrs), l(e, t), t }(t)), r = function(e, t, n) { var r = n.css; var o = n.sourceMap; var i = void 0 === t.convertToAbsoluteUrls && o; (t.convertToAbsoluteUrls || i) && (r = h(r)), o && (r += '\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(o)))) + ' */'); var a = new Blob([r], { type: 'text/css' }); var s = e.href; e.href = URL.createObjectURL(a), s && URL.revokeObjectURL(s) }.bind(null, n, t), o = function() { d(n), n.href && URL.revokeObjectURL(n.href) }) : (n = f(t), r = function(e, t) { var n = t.css; var r = t.media; if (r && e.setAttribute('media', r), e.styleSheet)e.styleSheet.cssText = n; else { for (;e.firstChild;)e.removeChild(e.firstChild); e.appendChild(document.createTextNode(n)) } }.bind(null, n), o = function() { d(n) }); return r(e), function(t) { if (t) { if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap) return; r(e = t) } else o() } }e.exports = function(e, t) { if (typeof DEBUG !== 'undefined' && DEBUG && typeof document !== 'object') throw new Error('The style-loader cannot be used in a non-browser environment'); (t = t || {}).attrs = typeof t.attrs === 'object' ? t.attrs : {}, t.singleton || typeof t.singleton === 'boolean' || (t.singleton = o()), t.insertInto || (t.insertInto = 'head'), t.insertAt || (t.insertAt = 'bottom'); var n = u(e, t); return p(n, t), function(e) { for (var o = [], i = 0; i < n.length; i++) { var a = n[i]; (s = r[a.id]).refs--, o.push(s) } for (e && p(u(e, t), t), i = 0; i < o.length; i++) { var s; if ((s = o[i]).refs === 0) { for (var c = 0; c < s.parts.length; c++)s.parts[c](); delete r[s.id] } } } }; var m = (function() { var e = []; return function(t, n) { return e[t] = n, e.filter(Boolean).join('\n') } }()); function w(e, t, n, r) { var o = n ? '' : r.css; if (e.styleSheet)e.styleSheet.cssText = m(t, o); else { var i = document.createTextNode(o); var a = e.childNodes; a[t] && e.removeChild(a[t]), a.length ? e.insertBefore(i, a[t]) : e.appendChild(i) } } }, function(e, t) { e.exports = function(e) { var t = typeof window !== 'undefined' && window.location; if (!t) throw new Error('fixUrls requires window.location'); if (!e || typeof e !== 'string') return e; var n = t.protocol + '//' + t.host; var r = n + t.pathname.replace(/\/[^\/]*$/, '/'); return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(e, t) { var o; var i = t.trim().replace(/^"(.*)"$/, function(e, t) { return t }).replace(/^'(.*)'$/, function(e, t) { return t }); return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i) ? e : (o = i.indexOf('//') === 0 ? i : i.indexOf('/') === 0 ? n + i : r + i.replace(/^\.\//, ''), 'url(' + JSON.stringify(o) + ')') }) } }, function(e, t, n) { 'use strict'; n.r(t); var r = function() { var e = this; var t = e.$createElement; var n = e._self._c || t; return n('div', { ref: 'cropper', staticClass: 'vue-cropper', on: { mouseover: e.scaleImg, mouseout: e.cancelScale } }, [e.imgs ? n('div', { staticClass: 'cropper-box' }, [n('div', { directives: [{ name: 'show', rawName: 'v-show', value: !e.loading, expression: '!loading' }], staticClass: 'cropper-box-canvas', style: { width: e.trueWidth + 'px', height: e.trueHeight + 'px', transform: 'scale(' + e.scale + ',' + e.scale + ') translate3d(' + e.x / e.scale + 'px,' + e.y / e.scale + 'px,0)rotateZ(' + 90 * e.rotate + 'deg)' } }, [n('img', { ref: 'cropperImg', attrs: { src: e.imgs, alt: 'cropper-img' } })])]) : e._e(), e._v(' '), n('div', { staticClass: 'cropper-drag-box', class: { 'cropper-move': e.move && !e.crop, 'cropper-crop': e.crop, 'cropper-modal': e.cropping }, on: { mousedown: e.startMove, touchstart: e.startMove } }), e._v(' '), n('div', { directives: [{ name: 'show', rawName: 'v-show', value: e.cropping, expression: 'cropping' }], staticClass: 'cropper-crop-box', style: { width: e.cropW + 'px', height: e.cropH + 'px', transform: 'translate3d(' + e.cropOffsertX + 'px,' + e.cropOffsertY + 'px,0)' } }, [n('span', { staticClass: 'cropper-view-box' }, [n('img', { style: { width: e.trueWidth + 'px', height: e.trueHeight + 'px', transform: 'scale(' + e.scale + ',' + e.scale + ') translate3d(' + (e.x - e.cropOffsertX) / e.scale + 'px,' + (e.y - e.cropOffsertY) / e.scale + 'px,0)rotateZ(' + 90 * e.rotate + 'deg)' }, attrs: { src: e.imgs, alt: 'cropper-img' } })]), e._v(' '), n('span', { staticClass: 'cropper-face cropper-move', on: { mousedown: e.cropMove, touchstart: e.cropMove } }), e._v(' '), e.info ? n('span', { staticClass: 'crop-info', style: { top: e.cropInfo.top } }, [e._v(e._s(this.cropInfo.width) + ' × ' + e._s(this.cropInfo.height))]) : e._e(), e._v(' '), e.fixedBox ? e._e() : n('span', [n('span', { staticClass: 'crop-line line-w', on: { mousedown: function(t) { e.changeCropSize(t, !1, !0, 0, 1) }, touchstart: function(t) { e.changeCropSize(t, !1, !0, 0, 1) } } }), e._v(' '), n('span', { staticClass: 'crop-line line-a', on: { mousedown: function(t) { e.changeCropSize(t, !0, !1, 1, 0) }, touchstart: function(t) { e.changeCropSize(t, !0, !1, 1, 0) } } }), e._v(' '), n('span', { staticClass: 'crop-line line-s', on: { mousedown: function(t) { e.changeCropSize(t, !1, !0, 0, 2) }, touchstart: function(t) { e.changeCropSize(t, !1, !0, 0, 2) } } }), e._v(' '), n('span', { staticClass: 'crop-line line-d', on: { mousedown: function(t) { e.changeCropSize(t, !0, !1, 2, 0) }, touchstart: function(t) { e.changeCropSize(t, !0, !1, 2, 0) } } }), e._v(' '), n('span', { staticClass: 'crop-point point1', on: { mousedown: function(t) { e.changeCropSize(t, !0, !0, 1, 1) }, touchstart: function(t) { e.changeCropSize(t, !0, !0, 1, 1) } } }), e._v(' '), n('span', { staticClass: 'crop-point point2', on: { mousedown: function(t) { e.changeCropSize(t, !1, !0, 0, 1) }, touchstart: function(t) { e.changeCropSize(t, !1, !0, 0, 1) } } }), e._v(' '), n('span', { staticClass: 'crop-point point3', on: { mousedown: function(t) { e.changeCropSize(t, !0, !0, 2, 1) }, touchstart: function(t) { e.changeCropSize(t, !0, !0, 2, 1) } } }), e._v(' '), n('span', { staticClass: 'crop-point point4', on: { mousedown: function(t) { e.changeCropSize(t, !0, !1, 1, 0) }, touchstart: function(t) { e.changeCropSize(t, !0, !1, 1, 0) } } }), e._v(' '), n('span', { staticClass: 'crop-point point5', on: { mousedown: function(t) { e.changeCropSize(t, !0, !1, 2, 0) }, touchstart: function(t) { e.changeCropSize(t, !0, !1, 2, 0) } } }), e._v(' '), n('span', { staticClass: 'crop-point point6', on: { mousedown: function(t) { e.changeCropSize(t, !0, !0, 1, 2) }, touchstart: function(t) { e.changeCropSize(t, !0, !0, 1, 2) } } }), e._v(' '), n('span', { staticClass: 'crop-point point7', on: { mousedown: function(t) { e.changeCropSize(t, !1, !0, 0, 2) }, touchstart: function(t) { e.changeCropSize(t, !1, !0, 0, 2) } } }), e._v(' '), n('span', { staticClass: 'crop-point point8', on: { mousedown: function(t) { e.changeCropSize(t, !0, !0, 2, 2) }, touchstart: function(t) { e.changeCropSize(t, !0, !0, 2, 2) } } })])])]) }; r._withStripped = !0; var o = { getData: function(e) { return new Promise(function(t, n) { var r = {}; (function(e) { var t = null; return new Promise(function(n, r) { if (e.src) if (/^data\:/i.test(e.src))t = (function(e) { e = e.replace(/^data\:([^\;]+)\;base64,/gim, ''); for (var t = atob(e), n = t.length, r = new ArrayBuffer(n), o = new Uint8Array(r), i = 0; i < n; i++)o[i] = t.charCodeAt(i); return r }(e.src)), n(t); else if (/^blob\:/i.test(e.src)) { var o = new FileReader(); o.onload = function(e) { t = e.target.result, n(t) }, (function(e, t) { var n = new XMLHttpRequest(); n.open('GET', e, !0), n.responseType = 'blob', n.onload = function(e) { this.status != 200 && this.status !== 0 || t(this.response) }, n.send() }(e.src, function(e) { o.readAsArrayBuffer(e) })) } else { var i = new XMLHttpRequest(); i.onload = function() { if (this.status != 200 && this.status !== 0) throw 'Could not load image'; t = i.response, n(t), i = null }, i.open('GET', e.src, !0), i.responseType = 'arraybuffer', i.send(null) } else r('img error') }) })(e).then(function(e) { r.arrayBuffer = e, r.orientation = (function(e) { var t; var n; var r; var o; var i; var a; var s; var c; var h; var p = new DataView(e); var u = p.byteLength; if (p.getUint8(0) === 255 && p.getUint8(1) === 216) for (c = 2; c < u;) { if (p.getUint8(c) === 255 && p.getUint8(c + 1) === 225) { a = c; break }c++ } if (a && (n = a + 10, (function(e, t, n) { var r; var o = ''; for (r = t, n += t; r < n; r++)o += String.fromCharCode(e.getUint8(r)); return o }(p, a + 4, 4)) === 'Exif' && (i = p.getUint16(n), ((o = i === 18761) || i === 19789) && p.getUint16(n + 2, o) === 42 && (r = p.getUint32(n + 4, o)) >= 8 && (s = n + r))), s) for (u = p.getUint16(s, o), h = 0; h < u; h++) if (c = s + 12 * h + 2, p.getUint16(c, o) === 274) { c += 8, t = p.getUint16(c, o); break } return t }(e)), t(r) }).catch(function(e) { n(e) }) }) } }; var i = o; var a = { data: function() { return { w: 0, h: 0, scale: 1, x: 0, y: 0, loading: !0, trueWidth: 0, trueHeight: 0, move: !0, moveX: 0, moveY: 0, crop: !1, cropping: !1, cropW: 0, cropH: 0, cropOldW: 0, cropOldH: 0, canChangeX: !1, canChangeY: !1, changeCropTypeX: 1, changeCropTypeY: 1, cropX: 0, cropY: 0, cropChangeX: 0, cropChangeY: 0, cropOffsertX: 0, cropOffsertY: 0, support: '', touches: [], touchNow: !1, rotate: 0, isIos: !1, orientation: 0, imgs: '', coe: 0.2, scaling: !1, scalingSet: '', coeStatus: '', isCanShow: !0 } }, props: { img: { type: [String, Blob, null, File], default: '' }, outputSize: { type: Number, default: 1 }, outputType: { type: String, default: 'jpeg' }, info: { type: Boolean, default: !0 }, canScale: { type: Boolean, default: !0 }, autoCrop: { type: Boolean, default: !1 }, autoCropWidth: { type: [Number, String], default: 0 }, autoCropHeight: { type: [Number, String], default: 0 }, fixed: { type: Boolean, default: !1 }, fixedNumber: { type: Array, default: function() { return [1, 1] } }, fixedBox: { type: Boolean, default: !1 }, full: { type: Boolean, default: !1 }, canMove: { type: Boolean, default: !0 }, canMoveBox: { type: Boolean, default: !0 }, original: { type: Boolean, default: !1 }, centerBox: { type: Boolean, default: !1 }, high: { type: Boolean, default: !0 }, infoTrue: { type: Boolean, default: !1 }, maxImgSize: { type: [Number, String], default: 2e3 }, enlarge: { type: [Number, String], default: 1 }, preW: { type: [Number, String], default: 0 }, mode: { type: String, default: 'contain' }, limitMinSize: { type: [Number, Array, String], default: function() { return 10 } } }, computed: { cropInfo: function() { var e = {}; if (e.top = this.cropOffsertY > 21 ? '-21px' : '0px', e.width = this.cropW > 0 ? this.cropW : 0, e.height = this.cropH > 0 ? this.cropH : 0, this.infoTrue) { var t = 1; this.high && !this.full && (t = window.devicePixelRatio), this.enlarge !== 1 & !this.full && (t = Math.abs(Number(this.enlarge))), e.width = e.width * t, e.height = e.height * t, this.full && (e.width = e.width / this.scale, e.height = e.height / this.scale) } return e.width = e.width.toFixed(0), e.height = e.height.toFixed(0), e }, isIE: function() { navigator.userAgent; var e = !!window.ActiveXObject || 'ActiveXObject' in window; return e }, passive: function() { return this.isIE ? null : { passive: !1 } } }, watch: { img: function() { this.checkedImg() }, imgs: function(e) { e !== '' && this.reload() }, cropW: function() { this.showPreview() }, cropH: function() { this.showPreview() }, cropOffsertX: function() { this.showPreview() }, cropOffsertY: function() { this.showPreview() }, scale: function(e, t) { this.showPreview() }, x: function() { this.showPreview() }, y: function() { this.showPreview() }, autoCrop: function(e) { e && this.goAutoCrop() }, autoCropWidth: function() { this.autoCrop && this.goAutoCrop() }, autoCropHeight: function() { this.autoCrop && this.goAutoCrop() }, mode: function() { this.checkedImg() }, rotate: function() { this.showPreview(), (this.autoCrop || this.cropW > 0 || this.cropH > 0) && this.goAutoCrop(this.cropW, this.cropH) } }, methods: { getVersion: function(e) { for (var t = navigator.userAgent.split(' '), n = '', r = new RegExp(e, 'i'), o = 0; o < t.length; o++)r.test(t[o]) && (n = t[o]); return n ? n.split('/')[1].split('.') : ['0', '0', '0'] }, checkOrientationImage: function(e, t, n, r) { var o = this; if (this.getVersion('chrome')[0] >= 81)t = -1; else if (this.getVersion('safari')[0] >= 605) { var i = this.getVersion('version'); i[0] > 13 && i[1] > 1 && (t = -1) } else { var a = navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/); if (a) { var s = a[1]; ((s = s.split('_'))[0] > 13 || s[0] >= 13 && s[1] >= 4) && (t = -1) } } var c = document.createElement('canvas'); var h = c.getContext('2d'); switch (h.save(), t) { case 2:c.width = n, c.height = r, h.translate(n, 0), h.scale(-1, 1); break; case 3:c.width = n, c.height = r, h.translate(n / 2, r / 2), h.rotate(180 * Math.PI / 180), h.translate(-n / 2, -r / 2); break; case 4:c.width = n, c.height = r, h.translate(0, r), h.scale(1, -1); break; case 5:c.height = n, c.width = r, h.rotate(0.5 * Math.PI), h.scale(1, -1); break; case 6:c.width = r, c.height = n, h.translate(r / 2, n / 2), h.rotate(90 * Math.PI / 180), h.translate(-n / 2, -r / 2); break; case 7:c.height = n, c.width = r, h.rotate(0.5 * Math.PI), h.translate(n, -r), h.scale(-1, 1); break; case 8:c.height = n, c.width = r, h.translate(r / 2, n / 2), h.rotate(-90 * Math.PI / 180), h.translate(-n / 2, -r / 2); break; default:c.width = n, c.height = r }h.drawImage(e, 0, 0, n, r), h.restore(), c.toBlob(function(e) { var t = URL.createObjectURL(e); URL.revokeObjectURL(o.imgs), o.imgs = t }, 'image/' + this.outputType, 1) }, checkedImg: function() { var e = this; if (this.img === null || this.img === '') return this.imgs = '', void this.clearCrop(); this.loading = !0, this.scale = 1, this.rotate = 0, this.clearCrop(); var t = new Image(); if (t.onload = function() { if (e.img === '') return e.$emit('imgLoad', 'error'), e.$emit('img-load', 'error'), !1; var n = t.width; var r = t.height; i.getData(t).then(function(o) { e.orientation = o.orientation || 1; var i = Number(e.maxImgSize); !e.orientation && n < i & r < i ? e.imgs = e.img : (n > i && (r = r / n * i, n = i), r > i && (n = n / r * i, r = i), e.checkOrientationImage(t, e.orientation, n, r)) }) }, t.onerror = function() { e.$emit('imgLoad', 'error'), e.$emit('img-load', 'error') }, this.img.substr(0, 4) !== 'data' && (t.crossOrigin = ''), this.isIE) { var n = new XMLHttpRequest(); n.onload = function() { var e = URL.createObjectURL(this.response); t.src = e }, n.open('GET', this.img, !0), n.responseType = 'blob', n.send() } else t.src = this.img }, startMove: function(e) { if (e.preventDefault(), this.move && !this.crop) { if (!this.canMove) return !1; this.moveX = ('clientX' in e ? e.clientX : e.touches[0].clientX) - this.x, this.moveY = ('clientY' in e ? e.clientY : e.touches[0].clientY) - this.y, e.touches ? (window.addEventListener('touchmove', this.moveImg), window.addEventListener('touchend', this.leaveImg), e.touches.length == 2 && (this.touches = e.touches, window.addEventListener('touchmove', this.touchScale), window.addEventListener('touchend', this.cancelTouchScale))) : (window.addEventListener('mousemove', this.moveImg), window.addEventListener('mouseup', this.leaveImg)), this.$emit('imgMoving', { moving: !0, axis: this.getImgAxis() }), this.$emit('img-moving', { moving: !0, axis: this.getImgAxis() }) } else this.cropping = !0, window.addEventListener('mousemove', this.createCrop), window.addEventListener('mouseup', this.endCrop), window.addEventListener('touchmove', this.createCrop), window.addEventListener('touchend', this.endCrop), this.cropOffsertX = e.offsetX ? e.offsetX : e.touches[0].pageX - this.$refs.cropper.offsetLeft, this.cropOffsertY = e.offsetY ? e.offsetY : e.touches[0].pageY - this.$refs.cropper.offsetTop, this.cropX = 'clientX' in e ? e.clientX : e.touches[0].clientX, this.cropY = 'clientY' in e ? e.clientY : e.touches[0].clientY, this.cropChangeX = this.cropOffsertX, this.cropChangeY = this.cropOffsertY, this.cropW = 0, this.cropH = 0 }, touchScale: function(e) { var t = this; e.preventDefault(); var n = this.scale; var r = this.touches[0].clientX; var o = this.touches[0].clientY; var i = e.touches[0].clientX; var a = e.touches[0].clientY; var s = this.touches[1].clientX; var c = this.touches[1].clientY; var h = e.touches[1].clientX; var p = e.touches[1].clientY; var u = Math.sqrt(Math.pow(r - s, 2) + Math.pow(o - c, 2)); var l = Math.sqrt(Math.pow(i - h, 2) + Math.pow(a - p, 2)) - u; var d = 1; var f = (d = (d = d / this.trueWidth > d / this.trueHeight ? d / this.trueHeight : d / this.trueWidth) > 0.1 ? 0.1 : d) * l; if (!this.touchNow) { if (this.touchNow = !0, l > 0 ? n += Math.abs(f) : l < 0 && n > Math.abs(f) && (n -= Math.abs(f)), this.touches = e.touches, setTimeout(function() { t.touchNow = !1 }, 8), !this.checkoutImgAxis(this.x, this.y, n)) return !1; this.scale = n } }, cancelTouchScale: function(e) { window.removeEventListener('touchmove', this.touchScale) }, moveImg: function(e) { var t = this; if (e.preventDefault(), e.touches && e.touches.length === 2) return this.touches = e.touches, window.addEventListener('touchmove', this.touchScale), window.addEventListener('touchend', this.cancelTouchScale), window.removeEventListener('touchmove', this.moveImg), !1; var n; var r; var o = 'clientX' in e ? e.clientX : e.touches[0].clientX; var i = 'clientY' in e ? e.clientY : e.touches[0].clientY; n = o - this.moveX, r = i - this.moveY, this.$nextTick(function() { if (t.centerBox) { var e; var o; var i; var a; var s = t.getImgAxis(n, r, t.scale); var c = t.getCropAxis(); var h = t.trueHeight * t.scale; var p = t.trueWidth * t.scale; switch (t.rotate) { case 1:case -1:case 3:case -3:e = t.cropOffsertX - t.trueWidth * (1 - t.scale) / 2 + (h - p) / 2, o = t.cropOffsertY - t.trueHeight * (1 - t.scale) / 2 + (p - h) / 2, i = e - h + t.cropW, a = o - p + t.cropH; break; default:e = t.cropOffsertX - t.trueWidth * (1 - t.scale) / 2, o = t.cropOffsertY - t.trueHeight * (1 - t.scale) / 2, i = e - p + t.cropW, a = o - h + t.cropH }s.x1 >= c.x1 && (n = e), s.y1 >= c.y1 && (r = o), s.x2 <= c.x2 && (n = i), s.y2 <= c.y2 && (r = a) }t.x = n, t.y = r, t.$emit('imgMoving', { moving: !0, axis: t.getImgAxis() }), t.$emit('img-moving', { moving: !0, axis: t.getImgAxis() }) }) }, leaveImg: function(e) { window.removeEventListener('mousemove', this.moveImg), window.removeEventListener('touchmove', this.moveImg), window.removeEventListener('mouseup', this.leaveImg), window.removeEventListener('touchend', this.leaveImg), this.$emit('imgMoving', { moving: !1, axis: this.getImgAxis() }), this.$emit('img-moving', { moving: !1, axis: this.getImgAxis() }) }, scaleImg: function() { this.canScale && window.addEventListener(this.support, this.changeSize, this.passive) }, cancelScale: function() { this.canScale && window.removeEventListener(this.support, this.changeSize) }, changeSize: function(e) { var t = this; e.preventDefault(); var n = this.scale; var r = e.deltaY || e.wheelDelta; r = navigator.userAgent.indexOf('Firefox') > 0 ? 30 * r : r, this.isIE && (r = -r); var o = this.coe; var i = (o = o / this.trueWidth > o / this.trueHeight ? o / this.trueHeight : o / this.trueWidth) * r; i < 0 ? n += Math.abs(i) : n > Math.abs(i) && (n -= Math.abs(i)); var a = i < 0 ? 'add' : 'reduce'; if (a !== this.coeStatus && (this.coeStatus = a, this.coe = 0.2), this.scaling || (this.scalingSet = setTimeout(function() { t.scaling = !1, t.coe = t.coe += 0.01 }, 50)), this.scaling = !0, !this.checkoutImgAxis(this.x, this.y, n)) return !1; this.scale = n }, changeScale: function(e) { var t = this.scale; e = e || 1; var n = 20; if ((e *= n = n / this.trueWidth > n / this.trueHeight ? n / this.trueHeight : n / this.trueWidth) > 0 ? t += Math.abs(e) : t > Math.abs(e) && (t -= Math.abs(e)), !this.checkoutImgAxis(this.x, this.y, t)) return !1; this.scale = t }, createCrop: function(e) { var t = this; e.preventDefault(); var n = 'clientX' in e ? e.clientX : e.touches ? e.touches[0].clientX : 0; var r = 'clientY' in e ? e.clientY : e.touches ? e.touches[0].clientY : 0; this.$nextTick(function() { var e = n - t.cropX; var o = r - t.cropY; if (e > 0 ? (t.cropW = e + t.cropChangeX > t.w ? t.w - t.cropChangeX : e, t.cropOffsertX = t.cropChangeX) : (t.cropW = t.w - t.cropChangeX + Math.abs(e) > t.w ? t.cropChangeX : Math.abs(e), t.cropOffsertX = t.cropChangeX + e > 0 ? t.cropChangeX + e : 0), t.fixed) { var i = t.cropW / t.fixedNumber[0] * t.fixedNumber[1]; i + t.cropOffsertY > t.h ? (t.cropH = t.h - t.cropOffsertY, t.cropW = t.cropH / t.fixedNumber[1] * t.fixedNumber[0], t.cropOffsertX = e > 0 ? t.cropChangeX : t.cropChangeX - t.cropW) : t.cropH = i, t.cropOffsertY = t.cropOffsertY } else o > 0 ? (t.cropH = o + t.cropChangeY > t.h ? t.h - t.cropChangeY : o, t.cropOffsertY = t.cropChangeY) : (t.cropH = t.h - t.cropChangeY + Math.abs(o) > t.h ? t.cropChangeY : Math.abs(o), t.cropOffsertY = t.cropChangeY + o > 0 ? t.cropChangeY + o : 0) }) }, changeCropSize: function(e, t, n, r, o) { e.preventDefault(), window.addEventListener('mousemove', this.changeCropNow), window.addEventListener('mouseup', this.changeCropEnd), window.addEventListener('touchmove', this.changeCropNow), window.addEventListener('touchend', this.changeCropEnd), this.canChangeX = t, this.canChangeY = n, this.changeCropTypeX = r, this.changeCropTypeY = o, this.cropX = 'clientX' in e ? e.clientX : e.touches[0].clientX, this.cropY = 'clientY' in e ? e.clientY : e.touches[0].clientY, this.cropOldW = this.cropW, this.cropOldH = this.cropH, this.cropChangeX = this.cropOffsertX, this.cropChangeY = this.cropOffsertY, this.fixed && this.canChangeX && this.canChangeY && (this.canChangeY = 0), this.$emit('change-crop-size', { width: this.cropW, height: this.cropH }) }, changeCropNow: function(e) { var t = this; e.preventDefault(); var n = 'clientX' in e ? e.clientX : e.touches ? e.touches[0].clientX : 0; var r = 'clientY' in e ? e.clientY : e.touches ? e.touches[0].clientY : 0; var o = this.w; var i = this.h; var a = 0; var s = 0; if (this.centerBox) { var c = this.getImgAxis(); var h = c.x2; var p = c.y2; a = c.x1 > 0 ? c.x1 : 0, s = c.y1 > 0 ? c.y1 : 0, o > h && (o = h), i > p && (i = p) } this.$nextTick(function() { var e = n - t.cropX; var c = r - t.cropY; if (t.canChangeX && (t.changeCropTypeX === 1 ? t.cropOldW - e > 0 ? (t.cropW = o - t.cropChangeX - e <= o - a ? t.cropOldW - e : t.cropOldW + t.cropChangeX - a, t.cropOffsertX = o - t.cropChangeX - e <= o - a ? t.cropChangeX + e : a) : (t.cropW = Math.abs(e) + t.cropChangeX <= o ? Math.abs(e) - t.cropOldW : o - t.cropOldW - t.cropChangeX, t.cropOffsertX = t.cropChangeX + t.cropOldW) : t.changeCropTypeX === 2 && (t.cropOldW + e > 0 ? (t.cropW = t.cropOldW + e + t.cropOffsertX <= o ? t.cropOldW + e : o - t.cropOffsertX, t.cropOffsertX = t.cropChangeX) : (t.cropW = o - t.cropChangeX + Math.abs(e + t.cropOldW) <= o - a ? Math.abs(e + t.cropOldW) : t.cropChangeX - a, t.cropOffsertX = o - t.cropChangeX + Math.abs(e + t.cropOldW) <= o - a ? t.cropChangeX - Math.abs(e + t.cropOldW) : a))), t.canChangeY && (t.changeCropTypeY === 1 ? t.cropOldH - c > 0 ? (t.cropH = i - t.cropChangeY - c <= i - s ? t.cropOldH - c : t.cropOldH + t.cropChangeY - s, t.cropOffsertY = i - t.cropChangeY - c <= i - s ? t.cropChangeY + c : s) : (t.cropH = Math.abs(c) + t.cropChangeY <= i ? Math.abs(c) - t.cropOldH : i - t.cropOldH - t.cropChangeY, t.cropOffsertY = t.cropChangeY + t.cropOldH) : t.changeCropTypeY === 2 && (t.cropOldH + c > 0 ? (t.cropH = t.cropOldH + c + t.cropOffsertY <= i ? t.cropOldH + c : i - t.cropOffsertY, t.cropOffsertY = t.cropChangeY) : (t.cropH = i - t.cropChangeY + Math.abs(c + t.cropOldH) <= i - s ? Math.abs(c + t.cropOldH) : t.cropChangeY - s, t.cropOffsertY = i - t.cropChangeY + Math.abs(c + t.cropOldH) <= i - s ? t.cropChangeY - Math.abs(c + t.cropOldH) : s))), t.canChangeX && t.fixed) { var h = t.cropW / t.fixedNumber[0] * t.fixedNumber[1]; h + t.cropOffsertY > i ? (t.cropH = i - t.cropOffsertY, t.cropW = t.cropH / t.fixedNumber[1] * t.fixedNumber[0]) : t.cropH = h } if (t.canChangeY && t.fixed) { var p = t.cropH / t.fixedNumber[1] * t.fixedNumber[0]; p + t.cropOffsertX > o ? (t.cropW = o - t.cropOffsertX, t.cropH = t.cropW / t.fixedNumber[0] * t.fixedNumber[1]) : t.cropW = p } }) }, checkCropLimitSize: function() { this.cropW, this.cropH; var e = this.limitMinSize; var t = new Array(); return t = Array.isArray[e] ? e : [e, e], [parseFloat(t[0]), parseFloat(t[1])] }, changeCropEnd: function(e) { window.removeEventListener('mousemove', this.changeCropNow), window.removeEventListener('mouseup', this.changeCropEnd), window.removeEventListener('touchmove', this.changeCropNow), window.removeEventListener('touchend', this.changeCropEnd) }, endCrop: function() { this.cropW === 0 && this.cropH === 0 && (this.cropping = !1), window.removeEventListener('mousemove', this.createCrop), window.removeEventListener('mouseup', this.endCrop), window.removeEventListener('touchmove', this.createCrop), window.removeEventListener('touchend', this.endCrop) }, startCrop: function() { this.crop = !0 }, stopCrop: function() { this.crop = !1 }, clearCrop: function() { this.cropping = !1, this.cropW = 0, this.cropH = 0 }, cropMove: function(e) { if (e.preventDefault(), !this.canMoveBox) return this.crop = !1, this.startMove(e), !1; if (e.touches && e.touches.length === 2) return this.crop = !1, this.startMove(e), this.leaveCrop(), !1; window.addEventListener('mousemove', this.moveCrop), window.addEventListener('mouseup', this.leaveCrop), window.addEventListener('touchmove', this.moveCrop), window.addEventListener('touchend', this.leaveCrop); var t; var n; var r = 'clientX' in e ? e.clientX : e.touches[0].clientX; var o = 'clientY' in e ? e.clientY : e.touches[0].clientY; t = r - this.cropOffsertX, n = o - this.cropOffsertY, this.cropX = t, this.cropY = n, this.$emit('cropMoving', { moving: !0, axis: this.getCropAxis() }), this.$emit('crop-moving', { moving: !0, axis: this.getCropAxis() }) }, moveCrop: function(e, t) { var n = this; var r = 0; var o = 0; e && (e.preventDefault(), r = 'clientX' in e ? e.clientX : e.touches[0].clientX, o = 'clientY' in e ? e.clientY : e.touches[0].clientY), this.$nextTick(function() { var e; var i; var a = r - n.cropX; var s = o - n.cropY; if (t && (a = n.cropOffsertX, s = n.cropOffsertY), e = a <= 0 ? 0 : a + n.cropW > n.w ? n.w - n.cropW : a, i = s <= 0 ? 0 : s + n.cropH > n.h ? n.h - n.cropH : s, n.centerBox) { var c = n.getImgAxis(); e <= c.x1 && (e = c.x1), e + n.cropW > c.x2 && (e = c.x2 - n.cropW), i <= c.y1 && (i = c.y1), i + n.cropH > c.y2 && (i = c.y2 - n.cropH) }n.cropOffsertX = e, n.cropOffsertY = i, n.$emit('cropMoving', { moving: !0, axis: n.getCropAxis() }), n.$emit('crop-moving', { moving: !0, axis: n.getCropAxis() }) }) }, getImgAxis: function(e, t, n) { e = e || this.x, t = t || this.y, n = n || this.scale; var r = { x1: 0, x2: 0, y1: 0, y2: 0 }; var o = this.trueWidth * n; var i = this.trueHeight * n; switch (this.rotate) { case 0:r.x1 = e + this.trueWidth * (1 - n) / 2, r.x2 = r.x1 + this.trueWidth * n, r.y1 = t + this.trueHeight * (1 - n) / 2, r.y2 = r.y1 + this.trueHeight * n; break; case 1:case -1:case 3:case -3:r.x1 = e + this.trueWidth * (1 - n) / 2 + (o - i) / 2, r.x2 = r.x1 + this.trueHeight * n, r.y1 = t + this.trueHeight * (1 - n) / 2 + (i - o) / 2, r.y2 = r.y1 + this.trueWidth * n; break; default:r.x1 = e + this.trueWidth * (1 - n) / 2, r.x2 = r.x1 + this.trueWidth * n, r.y1 = t + this.trueHeight * (1 - n) / 2, r.y2 = r.y1 + this.trueHeight * n } return r }, getCropAxis: function() { var e = { x1: 0, x2: 0, y1: 0, y2: 0 }; return e.x1 = this.cropOffsertX, e.x2 = e.x1 + this.cropW, e.y1 = this.cropOffsertY, e.y2 = e.y1 + this.cropH, e }, leaveCrop: function(e) { window.removeEventListener('mousemove', this.moveCrop), window.removeEventListener('mouseup', this.leaveCrop), window.removeEventListener('touchmove', this.moveCrop), window.removeEventListener('touchend', this.leaveCrop), this.$emit('cropMoving', { moving: !1, axis: this.getCropAxis() }), this.$emit('crop-moving', { moving: !1, axis: this.getCropAxis() }) }, getCropChecked: function(e) { var t = this; var n = document.createElement('canvas'); var r = new Image(); var o = this.rotate; var i = this.trueWidth; var a = this.trueHeight; var s = this.cropOffsertX; var c = this.cropOffsertY; function h(e, t) { n.width = Math.round(e), n.height = Math.round(t) }r.onload = function() { if (t.cropW !== 0) { var p = n.getContext('2d'); var u = 1; t.high & !t.full && (u = window.devicePixelRatio), t.enlarge !== 1 & !t.full && (u = Math.abs(Number(t.enlarge))); var l = t.cropW * u; var d = t.cropH * u; var f = i * t.scale * u; var g = a * t.scale * u; var v = (t.x - s + t.trueWidth * (1 - t.scale) / 2) * u; var m = (t.y - c + t.trueHeight * (1 - t.scale) / 2) * u; switch (h(l, d), p.save(), o) { case 0:t.full ? (h(l / t.scale, d / t.scale), p.drawImage(r, v / t.scale, m / t.scale, f / t.scale, g / t.scale)) : p.drawImage(r, v, m, f, g); break; case 1:case -3:t.full ? (h(l / t.scale, d / t.scale), v = v / t.scale + (f / t.scale - g / t.scale) / 2, m = m / t.scale + (g / t.scale - f / t.scale) / 2, p.rotate(90 * o * Math.PI / 180), p.drawImage(r, m, -v - g / t.scale, f / t.scale, g / t.scale)) : (v += (f - g) / 2, m += (g - f) / 2, p.rotate(90 * o * Math.PI / 180), p.drawImage(r, m, -v - g, f, g)); break; case 2:case -2:t.full ? (h(l / t.scale, d / t.scale), p.rotate(90 * o * Math.PI / 180), v /= t.scale, m /= t.scale, p.drawImage(r, -v - f / t.scale, -m - g / t.scale, f / t.scale, g / t.scale)) : (p.rotate(90 * o * Math.PI / 180), p.drawImage(r, -v - f, -m - g, f, g)); break; case 3:case -1:t.full ? (h(l / t.scale, d / t.scale), v = v / t.scale + (f / t.scale - g / t.scale) / 2, m = m / t.scale + (g / t.scale - f / t.scale) / 2, p.rotate(90 * o * Math.PI / 180), p.drawImage(r, -m - f / t.scale, v, f / t.scale, g / t.scale)) : (v += (f - g) / 2, m += (g - f) / 2, p.rotate(90 * o * Math.PI / 180), p.drawImage(r, -m - f, v, f, g)); break; default:t.full ? (h(l / t.scale, d / t.scale), p.drawImage(r, v / t.scale, m / t.scale, f / t.scale, g / t.scale)) : p.drawImage(r, v, m, f, g) }p.restore() } else { var w = i * t.scale; var x = a * t.scale; var b = n.getContext('2d'); switch (b.save(), o) { case 0:h(w, x), b.drawImage(r, 0, 0, w, x); break; case 1:case -3:h(x, w), b.rotate(90 * o * Math.PI / 180), b.drawImage(r, 0, -x, w, x); break; case 2:case -2:h(w, x), b.rotate(90 * o * Math.PI / 180), b.drawImage(r, -w, -x, w, x); break; case 3:case -1:h(x, w), b.rotate(90 * o * Math.PI / 180), b.drawImage(r, -w, 0, w, x); break; default:h(w, x), b.drawImage(r, 0, 0, w, x) }b.restore() }e(n) }, this.img.substr(0, 4) !== 'data' && (r.crossOrigin = 'Anonymous'), r.src = this.imgs }, getCropData: function(e) { var t = this; this.getCropChecked(function(n) { e(n.toDataURL('image/' + t.outputType, t.outputSize)) }) }, getCropBlob: function(e) { var t = this; this.getCropChecked(function(n) { n.toBlob(function(t) { return e(t) }, 'image/' + t.outputType, t.outputSize) }) }, showPreview: function() { var e = this; if (!this.isCanShow) return !1; this.isCanShow = !1, setTimeout(function() { e.isCanShow = !0 }, 16); var t = this.cropW; var n = this.cropH; var r = this.scale; var o = {}; o.div = { width: ''.concat(t, 'px'), height: ''.concat(n, 'px') }; var i = (this.x - this.cropOffsertX) / r; var a = (this.y - this.cropOffsertY) / r; o.w = t, o.h = n, o.url = this.imgs, o.img = { width: ''.concat(this.trueWidth, 'px'), height: ''.concat(this.trueHeight, 'px'), transform: 'scale('.concat(r, ')translate3d(').concat(i, 'px, ').concat(a, 'px, ').concat(0, 'px)rotateZ(').concat(90 * this.rotate, 'deg)') }, o.html = '\n      <div class="show-preview" style="width: '.concat(o.w, 'px; height: ').concat(o.h, 'px,; overflow: hidden">\n        <div style="width: ').concat(t, 'px; height: ').concat(n, 'px">\n          <img src=').concat(o.url, ' style="width: ').concat(this.trueWidth, 'px; height: ').concat(this.trueHeight, 'px; transform:\n          scale(').concat(r, ')translate3d(').concat(i, 'px, ').concat(a, 'px, ').concat(0, 'px)rotateZ(').concat(90 * this.rotate, 'deg)">\n        </div>\n      </div>'), this.$emit('realTime', o), this.$emit('real-time', o) }, reload: function() { var e = this; var t = new Image(); t.onload = function() { e.w = parseFloat(window.getComputedStyle(e.$refs.cropper).width), e.h = parseFloat(window.getComputedStyle(e.$refs.cropper).height), e.trueWidth = t.width, e.trueHeight = t.height, e.original ? e.scale = 1 : e.scale = e.checkedMode(), e.$nextTick(function() { e.x = -(e.trueWidth - e.trueWidth * e.scale) / 2 + (e.w - e.trueWidth * e.scale) / 2, e.y = -(e.trueHeight - e.trueHeight * e.scale) / 2 + (e.h - e.trueHeight * e.scale) / 2, e.loading = !1, e.autoCrop && e.goAutoCrop(), e.$emit('img-load', 'success'), e.$emit('imgLoad', 'success'), setTimeout(function() { e.showPreview() }, 20) }) }, t.onerror = function() { e.$emit('imgLoad', 'error'), e.$emit('img-load', 'error') }, t.src = this.imgs }, checkedMode: function() { var e = 1; var t = (this.trueWidth, this.trueHeight); var n = this.mode.split(' '); switch (n[0]) { case 'contain':this.trueWidth > this.w && (e = this.w / this.trueWidth), this.trueHeight * e > this.h && (e = this.h / this.trueHeight); break; case 'cover':(t *= e = this.w / this.trueWidth) < this.h && (e = (t = this.h) / this.trueHeight); break; default:try { var r = n[0]; if (r.search('px') !== -1) { r = r.replace('px', ''); var o = parseFloat(r) / this.trueWidth; var i = 1; var a = n[1]; a.search('px') !== -1 && (a = a.replace('px', ''), i = (t = parseFloat(a)) / this.trueHeight), e = Math.min(o, i) } if (r.search('%') !== -1 && (r = r.replace('%', ''), e = parseFloat(r) / 100 * this.w / this.trueWidth), n.length === 2 && r === 'auto') { var s = n[1]; s.search('px') !== -1 && (s = s.replace('px', ''), e = (t = parseFloat(s)) / this.trueHeight), s.search('%') !== -1 && (s = s.replace('%', ''), e = (t = parseFloat(s) / 100 * this.h) / this.trueHeight) } } catch (t) { e = 1 } } return e }, goAutoCrop: function(e, t) { if (this.imgs !== '' && this.imgs !== null) { this.clearCrop(), this.cropping = !0; var n = this.w; var r = this.h; if (this.centerBox) { var o = Math.abs(this.rotate) % 2 > 0; var i = (o ? this.trueHeight : this.trueWidth) * this.scale; var a = (o ? this.trueWidth : this.trueHeight) * this.scale; n = i < n ? i : n, r = a < r ? a : r } var s = e || parseFloat(this.autoCropWidth); var c = t || parseFloat(this.autoCropHeight); s !== 0 && c !== 0 || (s = 0.8 * n, c = 0.8 * r), s = s > n ? n : s, c = c > r ? r : c, this.fixed && (c = s / this.fixedNumber[0] * this.fixedNumber[1]), c > this.h && (s = (c = this.h) / this.fixedNumber[1] * this.fixedNumber[0]), this.changeCrop(s, c) } }, changeCrop: function(e, t) { var n = this; if (this.centerBox) { var r = this.getImgAxis(); e > r.x2 - r.x1 && (t = (e = r.x2 - r.x1) / this.fixedNumber[0] * this.fixedNumber[1]), t > r.y2 - r.y1 && (e = (t = r.y2 - r.y1) / this.fixedNumber[1] * this.fixedNumber[0]) } this.cropW = e, this.cropH = t, this.checkCropLimitSize(), this.$nextTick(function() { n.cropOffsertX = (n.w - n.cropW) / 2, n.cropOffsertY = (n.h - n.cropH) / 2, n.centerBox && n.moveCrop(null, !0) }) }, refresh: function() { var e = this; this.img, this.imgs = '', this.scale = 1, this.crop = !1, this.rotate = 0, this.w = 0, this.h = 0, this.trueWidth = 0, this.trueHeight = 0, this.clearCrop(), this.$nextTick(function() { e.checkedImg() }) }, rotateLeft: function() { this.rotate = this.rotate <= -3 ? 0 : this.rotate - 1 }, rotateRight: function() { this.rotate = this.rotate >= 3 ? 0 : this.rotate + 1 }, rotateClear: function() { this.rotate = 0 }, checkoutImgAxis: function(e, t, n) { e = e || this.x, t = t || this.y, n = n || this.scale; var r = !0; if (this.centerBox) { var o = this.getImgAxis(e, t, n); var i = this.getCropAxis(); o.x1 >= i.x1 && (r = !1), o.x2 <= i.x2 && (r = !1), o.y1 >= i.y1 && (r = !1), o.y2 <= i.y2 && (r = !1) } return r } }, mounted: function() { this.support = 'onwheel' in document.createElement('div') ? 'wheel' : void 0 !== document.onmousewheel ? 'mousewheel' : 'DOMMouseScroll'; var e = this; var t = navigator.userAgent; this.isIOS = !!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), HTMLCanvasElement.prototype.toBlob || Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', { value: function(t, n, r) { for (var o = atob(this.toDataURL(n, r).split(',')[1]), i = o.length, a = new Uint8Array(i), s = 0; s < i; s++)a[s] = o.charCodeAt(s); t(new Blob([a], { type: e.type || 'image/png' })) } }), this.showPreview(), this.checkedImg() }, destroyed: function() { window.removeEventListener('mousemove', this.moveCrop), window.removeEventListener('mouseup', this.leaveCrop), window.removeEventListener('touchmove', this.moveCrop), window.removeEventListener('touchend', this.leaveCrop), this.cancelScale() } }; n(1); var s = (function(e, t, n, r, o, i, a, s) { var c; var h = typeof e === 'function' ? e.options : e; if (t && (h.render = t, h.staticRenderFns = n, h._compiled = !0), r && (h.functional = !0), i && (h._scopeId = 'data-v-' + i), a ? (c = function(e) { (e = e || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) || typeof __VUE_SSR_CONTEXT__ === 'undefined' || (e = __VUE_SSR_CONTEXT__), o && o.call(this, e), e && e._registeredComponents && e._registeredComponents.add(a) }, h._ssrRegister = c) : o && (c = s ? function() { o.call(this, this.$root.$options.shadowRoot) } : o), c) if (h.functional) { h._injectStyles = c; var p = h.render; h.render = function(e, t) { return c.call(t), p(e, t) } } else { var u = h.beforeCreate; h.beforeCreate = u ? [].concat(u, c) : [c] } return { exports: e, options: h } }(a, r, [], !1, null, '6dae58fd', null)); s.options.__file = 'src/vue-cropper.vue'; var c = s.exports; n.d(t, 'VueCropper', function() { return c }); var h = function(e) { e.component('VueCropper', c) }; typeof window !== 'undefined' && window.Vue && h(window.Vue), t.default = { version: '0.5.6', install: h, VueCropper: c, vueCropper: c } }])) })) }, b0c0: function(e, t, n) { var r = n('83ab'); var o = n('9bf2').f; var i = Function.prototype; var a = i.toString; var s = /^\s*function ([^ (]*)/; var c = 'name'; r && !(c in i) && o(i, c, { configurable: !0, get: function() { try { return a.call(this).match(s)[1] } catch (e) { return '' } } }) }, eb65: function(e, t, n) { 'use strict'; n.r(t); var r = function() { var e = this; var t = e.$createElement; var n = e._self._c || t; return n('div', { staticClass: 'profile' }, [n('van-nav-bar', { attrs: { 'left-arrow': '', title: '编辑资料' }, on: { 'click-left': function(t) { return e.$router.back() } } }), n('van-cell-group', [n('div', { staticClass: 'avatar' }, [n('van-image', { attrs: { fit: 'cover', round: '', src: e.user.photo } }), n('van-uploader', { staticClass: 'uploader', attrs: { 'after-read': e.afterRead } })], 1), e.isShowMask ? n('div', { staticClass: 'mask' }, [n('VueCropper', { ref: 'cropper', attrs: { img: e.img, autoCrop: '', autoCropwidth: '120', autoCropHeight: '120', fixed: '' } }), n('van-button', { staticClass: 'confirm', attrs: { type: 'primary' }, on: { click: e.savePhoto } }, [e._v(' 确定 ')]), n('van-button', { staticClass: 'cancel', attrs: { type: 'primary' }, on: { click: function(t) { e.isShowMask = !1 } } }, [e._v(' 取消 ')])], 1) : e._e(), n('van-cell', { attrs: { 'is-link': '', title: '名称', value: e.user.name }, on: { click: e.clickShowName } }), n('van-dialog', { attrs: { title: '修改姓名', 'show-cancel-button': '' }, on: { confirm: e.saveName }, model: { value: e.showName, callback: function(t) { e.showName = t }, expression: 'showName' } }, [n('van-field', { attrs: { placeholder: '请输入姓名' }, model: { value: e.newName, callback: function(t) { e.newName = typeof t === 'string' ? t.trim() : t }, expression: 'newName' } })], 1), n('van-cell', { attrs: { 'is-link': '', title: '性别', value: e.user.gender === 0 ? '男' : '女' }, on: { click: function(t) { e.showGender = !0 } } }), n('van-popup', { attrs: { position: 'bottom' }, model: { value: e.showGender, callback: function(t) { e.showGender = t }, expression: 'showGender' } }, [n('van-nav-bar', { attrs: { title: '修改性别', 'left-text': '取消' }, on: { 'click-left': function(t) { e.showGender = !1 } } }), n('van-cell', { attrs: { title: '男', 'is-link': '' }, on: { click: function(t) { return e.saveGender(0) } } }), n('van-cell', { attrs: { title: '女', 'is-link': '' }, on: { click: function(t) { return e.saveGender(1) } } })], 1), n('van-cell', { attrs: { 'is-link': '', title: '生日', value: e.user.birthday }, on: { click: e.clickShowBirthday } }), n('van-popup', { attrs: { position: 'bottom' }, model: { value: e.showBirthday, callback: function(t) { e.showBirthday = t }, expression: 'showBirthday' } }, [n('van-datetime-picker', { attrs: { type: 'date', title: '选择生日', 'min-date': e.minDate, 'max-date': e.maxDate }, on: { cancel: function(t) { e.showBirthday = !1 }, confirm: e.saveBirthday }, model: { value: e.newDate, callback: function(t) { e.newDate = t }, expression: 'newDate' } })], 1)], 1)], 1) }; var o = []; var i = n('1da1'); var a = (n('b0c0'), n('96cf'), n('c24f')); var s = n('5a0c'); var c = n.n(s); var h = n('7e79'); var p = { name: 'userProfile', components: { VueCropper: h.VueCropper }, data: function() { return { showName: !1, showGender: !1, showBirthday: !1, isShowMask: !1, user: {}, newName: '', img: '', minDate: new Date(1900, 0, 1), maxDate: new Date(), newDate: new Date() } }, created: function() { this.loadProfile() }, methods: { loadProfile: function() { var e = this; return Object(i.a)(regeneratorRuntime.mark(function t() { var n; return regeneratorRuntime.wrap(function(t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, Object(a.b)(); case 2:n = t.sent, e.user = n.data.data; case 5:case 'end':return t.stop() } }, t) }))() }, clickShowName: function() { this.showName = !0, this.newName = this.user.name }, saveName: function() { var e = this; return Object(i.a)(regeneratorRuntime.mark(function t() { return regeneratorRuntime.wrap(function(t) { while (1) switch (t.prev = t.next) { case 0:if (t.prev = 0, e.newName !== '') { t.next = 3; break } return t.abrupt('return'); case 3:if (!(e.newName.length > 7)) { t.next = 6; break } return e.$toast.fail('名字长度不能超过 7 个字符'), t.abrupt('return'); case 6:return t.next = 8, Object(a.h)({ name: e.newName }); case 8:e.user.name = e.newName, e.newName = '', e.$toast.success('修改成功'), t.next = 16; break; case 13:t.prev = 13, t.t0 = t.catch(0), e.$toast.fail(t.t0.response.data.message); case 16:case 'end':return t.stop() } }, t, null, [[0, 13]]) }))() }, saveGender: function(e) { var t = this; return Object(i.a)(regeneratorRuntime.mark(function n() { return regeneratorRuntime.wrap(function(n) { while (1) switch (n.prev = n.next) { case 0:return n.prev = 0, n.next = 3, Object(a.h)({ gender: e }); case 3:t.user.gender = e, t.$toast.success('修改成功'), t.showGender = !1, n.next = 11; break; case 8:n.prev = 8, n.t0 = n.catch(0), t.$toast.success('修改失败'); case 11:case 'end':return n.stop() } }, n, null, [[0, 8]]) }))() }, clickShowBirthday: function() { this.showBirthday = !0, this.newDate = new Date(this.user.birthday) }, saveBirthday: function() { var e = this; return Object(i.a)(regeneratorRuntime.mark(function t() { var n; return regeneratorRuntime.wrap(function(t) { while (1) switch (t.prev = t.next) { case 0:return t.prev = 0, n = c()(e.newDate).format('YYYY-MM-DD'), t.next = 4, Object(a.h)({ birthday: n }); case 4:e.user.birthday = n, e.$toast.success('修改成功'), e.showBirthday = !1, t.next = 13; break; case 9:t.prev = 9, t.t0 = t.catch(0), e.$toast.fail('修改失败'), e.showBirthday = !1; case 13:case 'end':return t.stop() } }, t, null, [[0, 9]]) }))() }, afterRead: function(e) { this.isShowMask = !0, this.img = e.content }, savePhoto: function() { var e = this; this.$refs.cropper.getCropBlob(function() { var t = Object(i.a)(regeneratorRuntime.mark(function t(n) { var r, o, i; return regeneratorRuntime.wrap(function(t) { while (1) switch (t.prev = t.next) { case 0:return t.prev = 0, e.$toast.loading({ message: '文件上传中...', forbidClick: !0, overlay: !0 }), r = new FormData(), r.append('photo', n), t.next = 6, Object(a.g)(r); case 6:o = t.sent, i = o.data.data.photo, e.user.photo = i, e.$toast.success('更新成功'), t.next = 15; break; case 12:t.prev = 12, t.t0 = t.catch(0), e.$toast.fail('更新失败'); case 15:e.isShowMask = !1; case 16:case 'end':return t.stop() } }, t, null, [[0, 12]]) })); return function(e) { return t.apply(this, arguments) } }()) } } }; var u = p; var l = (n('788b'), n('2877')); var d = Object(l.a)(u, r, o, !1, null, 'c86f0de8', null); t.default = d.exports } }])
// # sourceMappingURL=chunk-c55985f8.f74283b6.js.map
